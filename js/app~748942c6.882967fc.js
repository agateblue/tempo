(function(e){function t(t){for(var n,s,i=t[0],c=t[1],u=t[2],l=0,p=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={"app~748942c6":0},o=[];function s(e){return i.p+"js/"+({"tasks~31ecd969":"tasks~31ecd969","visualization~31ecd969":"visualization~31ecd969","alasql~2a42e354":"alasql~2a42e354"}[e]||e)+"."+{"tasks~31ecd969":"18552041","visualization~31ecd969":"81dcdf05","alasql~2a42e354":"7d46ea10"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=s(e);var u=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(l);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,r[1](u)}a[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=u;o.push([0,"chunk-vendors~253ae210","chunk-vendors~2ebc07f6","chunk-vendors~7d359b94","chunk-vendors~9c5b28f6","chunk-vendors~ec8c427e","chunk-vendors~fdc6512a","chunk-vendors~4a7e9e0b"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"025e":function(e,t,r){"use strict";r.d(t,"m",(function(){return f})),r.d(t,"f",(function(){return v})),r.d(t,"e",(function(){return x})),r.d(t,"h",(function(){return k})),r.d(t,"i",(function(){return _})),r.d(t,"g",(function(){return O})),r.d(t,"a",(function(){return D})),r.d(t,"n",(function(){return R})),r.d(t,"l",(function(){return q})),r.d(t,"j",(function(){return B})),r.d(t,"k",(function(){return I})),r.d(t,"d",(function(){return P})),r.d(t,"b",(function(){return M})),r.d(t,"c",(function(){return z}));r("99af"),r("4de4"),r("7db0"),r("4160"),r("caad"),r("c975"),r("a15b"),r("d81d"),r("fb6a"),r("b0c0"),r("b64b"),r("d3b7"),r("4d63"),r("ac1f"),r("25f0"),r("2532"),r("3ca3"),r("466d"),r("5319"),r("1276"),r("2ca0"),r("498a"),r("159b"),r("ddb0"),r("2b3d");var n=r("2909"),a=(r("96cf"),r("1da1")),o=r("5530"),s=r("b85c"),i=r("53ca"),c=r("c707"),u=r.n(c),l={"+":1,"-":-1,"~":0,"?":null,"#":null,"!":null,"@":null},d={"+":"feeling","-":"feeling","~":"feeling","?":"feeling","#":"tag","@":"annotation"},p=/(^|\s)((#|\+{1,5}|-{1,5}|~|\?|!|@)([:A-zÀ-ÿ\d-]+(=(true|false|[:A-zÀ-ÿ\d-]+|".*")?(-?\d*(\.(\d+))?)?)?))/gi;function h(e){var t=[],r=new RegExp(p),n=r.exec(e);while(null!=n){var a={text:n[2],sign:n[3][0],id:n[4].replace(/"/g,"")},o=!0;if(a.type=d[a.sign],"annotation"===a.type){var s=a.id.replace(/"/g,"").split("=");a.id=s[0],a.value=s[1]||null}a.mood=l[a.sign],a.mood&&(a.mood=a.mood*n[3].length),o&&t.push(a),n=r.exec(e)}return t}function f(e){try{return e.replace(p,(function(e,t,r,n,a){return" [".concat(r,"](/?q=tag:").concat(encodeURIComponent(a),'){.internal-link data-query="tag:').concat(a.split("=")[0],'"}')}))}catch(t){return""}}function v(e){var t={text:e,tags:h(e),mood:0,type:"entry",data:null},r=[];return t.tags.forEach((function(e){null!=e.mood&&void 0!=e.mood&&(t.mood+=e.mood),"annotation"===e.type&&e.value&&r.push([e.id,e.value])})),r.length>0&&(t.data={},r.forEach((function(e){t.data[e[0]]=e[1]}))),t}function m(e){return e?e.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})).map((function(e){return g(e)})):[]}function g(e){var t=[];if(!e)return[];var r=e.split(" ");return r.forEach((function(e){var r=e.trim();r&&(Object.keys(l).indexOf(r[0])>-1?1===r.length?t.push({sign:r[0]}):t.push({tag:r}):r.startsWith("d:")||r.startsWith("date:")?t.push({date:r.split(":")[1]}):r.startsWith("t:")||r.startsWith("tag:")?t.push({tagName:r.split(/:(.+)/)[1]}):r.startsWith("c:")||r.startsWith("category:")?t.push({categoryName:r.split(/:(.+)/)[1]}):r.startsWith("$")?t.push({alias:r.slice(1)}):t.push({text:r}))})),t}function b(e,t){if(!e)return!1;var r=new RegExp(e,"i");return t.match(r)||!1}function y(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=function(n){var a=t[n];if(a.alias&&r[a.alias]){var o=w(e,m(r[a.alias]));if(!o)return{v:!1}}if(a.text&&!e.text.toLowerCase().includes(a.text.toLowerCase()))return{v:b(a.text,e.text)};if(a.tag){var s=e.tags.filter((function(e){return b(a.tag.text,e.text)}));if(0===s.length)return{v:!1}}if(a.tagName){var i=e.tags.filter((function(e){return b(a.tagName,e.id)}));if(0===i.length)return{v:!1}}if(a.categoryName)return{v:b(a.categoryName,e.category)};if(a.sign){var c=e.tags.filter((function(e){return e.sign===a.sign}));if(0===c.length)return{v:!1}}return a.date&&!e._id.startsWith(a.date)?{v:!1}:void 0},a=0;a<t.length;a++){var o=n(a);if("object"===Object(i["a"])(o))return o.v}return!0}function w(e,t,r){var n,a=Object(s["a"])(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(y(e,o,r))return!0}}catch(i){a.e(i)}finally{a.f()}return!1}function x(e){var t=new Date(e.date),r=C(t),n=t.getFullYear(),a={text:e.text,_id:e._id,_rev:e._rev,mood:e.mood,fullDate:t,date:t.toISOString().split("T")[0],year:n,month:t.getMonth()+1,day:t.getDate(),weekday:t.getDay()+1,weeknumber:r,week:"".concat(n,"-").concat(r),tags:{},data:e.data||null};return e.tags.forEach((function(e){a.tags[e.id]=Object(o["a"])({},e,{present:!0})})),a.data&&Object.keys(a.data).forEach((function(t){if(a.data[t])try{a.data[t]=JSON.parse(a.data[t])}catch(e){}})),a}function k(e,t){var r=new Date((new Date).getTime()-24*t*3600*1e3).getTime();return e.filter((function(e){return new Date(e.date)>=r})).map((function(e){return x(e)}))}function _(e){var t={};return e.forEach((function(e){Object.keys(e.tags).forEach((function(r){var n=t[r]||{id:r,entries:0,mood:0};n.entries+=1,n.mood+=e.mood,t[r]=n}))})),Object.keys(t).map((function(e){return t[e]}))}function C(e){e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));var t=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-t);var r=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-r)/864e5+1)/7)}function $(e,t,r){return r=r||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(r)+e}function O(e){var t=e.toISOString().split("T"),r=t[1].slice(0,5).split(":"),n=parseInt(r[0]),a=parseInt(r[1])+60*n;a-=e.getTimezoneOffset();var o=Math.floor(a/60);24===o&&(o=0);var s=a%60;return"".concat($(o,2),":").concat($(s,2))}var D=[{value:"line",text:"Plot line"},{value:"pie",text:"Pie chart"},{value:"percentage",text:"Percentage bar"},{value:"table",text:"Table"},{value:"json",text:"JSON"}];function S(e,t){return T.apply(this,arguments)}function T(){return T=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={include_docs:!0},e.next=3,t.state.db.allDocs(n);case 3:return a=e.sent,o=a.rows.map((function(e){return e.doc})),o=o.filter((function(e){return"entry"==e.type})),o=u()(o,["date"]),r&&o.reversed(),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function j(e,t,r){if(0===t.length)return e;var n={};return r.forEach((function(e){n[e.name]=e.query})),e.filter((function(e){return w(e,t,n)}))}function R(e){return E.apply(this,arguments)}function E(){return E=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.store,n=t.sortDesc,a=t.query,e.next=3,S(r,n);case 3:return o=e.sent,e.abrupt("return",j(o,m(a),r.state.settings.aliases));case 5:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function V(e,t){return 0===t.length?e:e.filter((function(e){return w(e,t)}))}function q(e,t){return F.apply(this,arguments)}function F(){return F=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.state.db.find({selector:{type:"task",date:{$gt:0}}});case 2:return n=e.sent,a=n.docs,e.abrupt("return",V(a,m(r)));case 5:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function B(e){var t=["_rev","_id","_","type"];for(var r in e)if(Object.hasOwnProperty.call(e,r)&&-1===t.indexOf(r))return e[r]}function I(e){return L.apply(this,arguments)}function L(){return L=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.state.db.find({selector:{type:"settings"}});case 2:return r=e.sent,n=r.docs.map((function(e){return{_id:e._id,_rev:e._rev,value:e.value||B(e)}})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function P(e,t,r,n,a){var o=U(e,r,n),s=t.createElement("a");s.setAttribute("download",a),s.href=o,t.body.appendChild(s),e.requestAnimationFrame((function(){var e=new MouseEvent("click");s.dispatchEvent(e),t.body.removeChild(s)}))}function U(e,t,r){var n=new Blob([t],{type:r}),a=e.URL.createObjectURL(n);return a}var M=[{name:"webhook",default:function(){return{}}},{name:"charts",default:function(){return[]}},{name:"aliases",default:function(){return[]}},{name:"boardConfig",default:function(){return{lists:[{label:"To-do"},{label:"Doing"}],categories:[{label:"Personal"},{label:"Work"},{label:"House-keeping"}]}}}];function z(e,t){return A.apply(this,arguments)}function A(){return A=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var a,i,c,u,l,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],i=[],e.next=4,r.compact();case 4:c=Object(s["a"])(t),e.prev=5,c.s();case 7:if((u=c.n()).done){e.next=21;break}return l=u.value,e.prev=9,e.next=12,r.get(l._id);case 12:d=e.sent,a.push(Object(o["a"])({},l,{_rev:d._rev})),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](9),i.push(Object(o["a"])({},l));case 19:e.next=7;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e["catch"](5),c.e(e.t1);case 26:return e.prev=26,c.f(),e.finish(26);case 29:return e.t2=[],e.t3=n["a"],e.next=33,r.bulkDocs(i,{new_edits:!1});case 33:return e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t6=n["a"],e.next=38,r.bulkDocs(a);case 38:return e.t7=e.sent,e.t8=(0,e.t6)(e.t7),p=e.t2.concat.call(e.t2,e.t5,e.t8),e.abrupt("return",p);case 42:case"end":return e.stop()}}),e,null,[[5,23,26,29],[9,16]])}))),A.apply(this,arguments)}},1:function(e,t){},2:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("a026"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"tempo",dark:""}},[r("v-app-bar",{attrs:{app:"",dense:"",color:e.$theme.appBar.color}},[r("v-spacer"),r("v-spacer"),r("v-toolbar-title",{staticClass:"mr-4",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$router.push("/")}}},[e._v(" Tempo ")]),r("v-spacer"),r("v-text-field",{ref:"search",staticClass:"search",attrs:{dense:"",solo:"","hide-details":"",clearable:"",placeholder:"Search","append-icon":e.$icons.mdiMagnify},on:{"click:append":function(t){e.expandSearch=!0,e.$router.push({path:e.$route.path,query:{q:e.searchQuery}})},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$router.push({path:e.$route.path,query:{q:e.searchQuery}})},"click:clear":function(t){return e.$router.push({path:e.$route.path,query:{q:""}})}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),r("v-btn",{staticClass:"ml-3",attrs:{small:"",icon:"",to:"/about"}},[r("v-icon",{domProps:{textContent:e._s(e.$icons.mdiHelpCircleOutline)}})],1),r("v-spacer"),r("v-spacer")],1),r("v-main",[r("v-container",{staticStyle:{"padding-bottom":"64px"},attrs:{fluid:"",tag:"main"}},[r("router-view",{ref:"view"})],1)],1),r("v-bottom-navigation",{attrs:{fixed:""}},[r("v-spacer"),e.$store.state.couchDbUrl?r("v-btn",{style:e.bottomNavBarButtonStyle,attrs:{loading:e.$store.state.sync.loading},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.$store.dispatch("forceSync")}},scopedSlots:e._u([{key:"loader",fn:function(){return[r("span",[e._v("Syncing…")])]},proxy:!0}],null,!1,64789910)},[!e.$store.state.sync.loading&&e.$store.state.sync.error?r("span",[e._v(" Sync error: "),e.$store.state.sync.error.name?r("span",[e._v(e._s(e.$store.state.sync.error.name))]):r("span",[e._v("Unknown")])]):r("span",[e._v(" Sync ")]),r("v-icon",{domProps:{textContent:e._s(e.$icons.mdiSync)}})],1):e._e(),r("v-btn",{style:e.bottomNavBarButtonStyle,attrs:{to:"/diary"}},[r("span",[e._v("Diary")]),r("v-icon",{domProps:{textContent:e._s(e.$icons.mdiBook)}})],1),r("v-btn",{style:e.bottomNavBarButtonStyle,attrs:{to:"/tasks"}},[r("span",[e._v("Tasks")]),r("v-icon",{domProps:{textContent:e._s(e.$icons.mdiCheck)}})],1),r("v-btn",{style:e.bottomNavBarButtonStyle,attrs:{to:"/settings"}},[r("span",[e._v("Settings")]),r("v-icon",{domProps:{textContent:e._s(e.$icons.mdiCog)}})],1),r("v-spacer")],1)],1)},o=[],s=(r("96cf"),r("1da1")),i={data:function(){return{drawer:null,searchQuery:this.$route.query.q||"",exportDialog:!1}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadSettings");case 2:navigator.serviceWorker&&navigator.serviceWorker.addEventListener("controllerchange",(function(){e.$store.state.serviceWorker.refreshing||(e.$store.commit("serviceWorker",{refreshing:!0}),window.location.reload())}));case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;window.onclick=function(t){var r="internal-link";"a"==t.target.localName&&t.target.classList.contains(r)&&(t.preventDefault(),e.searchQuery=t.target.getAttribute("data-query"),e.$router.push({path:e.$route.path,query:{q:t.target.getAttribute("data-query")}}))}},computed:{bottomNavBarButtonStyle:function(){return"height: 56px; background: transparent;"}},methods:{updateApp:function(){this.$store.commit("serviceWorker",{updateAvailable:!1}),this.$store.state.serviceWorker.registration&&this.$store.state.serviceWorker.registration.waiting&&this.$store.state.serviceWorker.registration.waiting.postMessage({command:"skipWaiting"})},scrollToTop:function(){window.scrollTo(0,0)}},watch:{"$route.path":{handler:function(e){"/"===e&&this.$router.push("/diary")},immediate:!0}}},c=i,u=(r("5c0b"),r("2877")),l=r("6544"),d=r.n(l),p=r("7496"),h=r("40dc"),f=r("b81c"),v=r("8336"),m=r("a523"),g=r("132d"),b=r("f6c4"),y=r("2fa4"),w=r("8654"),x=r("2a7f"),k=Object(u["a"])(c,a,o,!1,null,null,null),_=k.exports;d()(k,{VApp:p["a"],VAppBar:h["a"],VBottomNavigation:f["a"],VBtn:v["a"],VContainer:m["a"],VIcon:g["a"],VMain:b["a"],VSpacer:y["a"],VTextField:w["a"],VToolbarTitle:x["b"]});var C=r("9483"),$=(r("99af"),r("4de4"),r("4160"),r("d81d"),r("b0c0"),r("d3b7"),r("159b"),r("b85c")),O=r("2909"),D=r("5530"),S=r("2f62"),T=r("16b2"),j=r("5d16"),R=r("fcd3"),E=r("025e");T["a"].plugin(j["a"]),T["a"].plugin(R["a"]),n["a"].use(S["a"]);var V=1,q=new S["a"].Store({state:{db:null,pageSize:30,syncHandler:null,couchDbUrl:null,couchDbUsername:null,couchDbPassword:null,lastSync:new Date,version:V,dark:!0,sync:{loading:!1,error:null},charts:[],aliases:[],serviceWorker:{refreshing:!1,registration:null,updateAvailable:!1},settings:{}},mutations:{handleSync:function(e,t){console.log("Received sync event",t),e.lastSync=new Date},syncHandler:function(e,t){e.syncHandler&&(console.log("Killing existing replication…"),e.syncHandler.cancel()),e.syncHandler=t},couchDbConfig:function(e,t){var r=t.url,n=t.username,a=t.password;e.couchDbUrl=r,e.couchDbUsername=n,e.couchDbPassword=a},loadCachedState:function(e){if(localStorage.getItem("state")){var t=JSON.parse(localStorage.getItem("state"));t.version==V?(console.log("Loading cached state…"),this.replaceState(Object.assign(e,t))):(console.log("Ignoring stale cache"),e.version=V)}},initDb:function(e){e.syncHandler&&(console.log("Killing existing replication…"),e.syncHandler.cancel()),e.db=new T["a"]("db"),e.db.createIndex({index:{fields:["date","type"]}})},serviceWorker:function(e,t){e.serviceWorker=Object(D["a"])({},e.serviceWorker,{},t)},setting:function(e,t){var r=t.name,n=t.value;e.settings[r]=n},settings:function(e,t){e.settings=t},sync:function(e,t){e.sync=t}},getters:{settings:function(e){var t={};return E["b"].forEach((function(r){var n=e.settings[r.name];void 0===n&&(n=r.default()),t[r.name]=n})),t},boardLists:function(e,t){return[].concat(Object(O["a"])(t.settings.boardConfig.lists),[{label:"Done"}])},taskCategoryChoices:function(e){return e.settings.boardConfig.categories.map((function(e){return{value:e.label,text:e.label}}))},taskListChoices:function(e){var t=0,r=[];return e.settings.boardConfig.lists.forEach((function(e){r.push({value:t,text:e.label}),t+=1})),r.push({value:t,text:"Done"}),r}},actions:{addEntry:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.dispatch,r.next=3,n.db.put(t);case 3:return a("forceSync"),r.next=6,n.db.get(t._id);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})))()},updateEntry:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.dispatch,r.next=3,n.db.put(t);case 3:return a("forceSync"),r.next=6,n.db.get(t._id);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})))()},reset:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.state,a=e.dispatch,t.next=3,n.db.destroy();case 3:return localStorage.removeItem("state"),r("settings",{}),r("initDb"),t.next=8,a("setupSync",{url:n.couchDbUrl,username:n.couchDbUsername,password:n.couchDbPassword});case 8:return t.next=10,a("loadSettings");case 10:case"end":return t.stop()}}),t)})))()},setupSync:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,c,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.state,a=e.commit,o=t.url,s=t.username,i=t.password,a("syncHandler",null),a("couchDbConfig",{url:o,username:s,password:i}),!n.couchDbUrl){r.next=12;break}return console.log("Setting up live replication…"),c=new T["a"](n.couchDbUrl),console.log("Logging in…"),r.next=10,c.logIn(s,i);case 10:u=n.db.sync(c,{live:!0,retry:!0}).on("change",(function(){console.log("Sync change…")})).on("active",(function(){console.log("Sync active…")})).on("complete",(function(){console.log("Sync complete…")})),a("syncHandler",u);case 12:case"end":return r.stop()}}),r)})))()},forceSync:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.state,n=e.commit,r.couchDbUrl&&!r.sync.loading){t.next=3;break}return t.abrupt("return");case 3:return n("sync",{loading:!0,error:null}),console.log("Forcing sync…"),a=new T["a"](r.couchDbUrl),t.prev=6,t.next=9,a.logIn(r.couchDbUsername,r.couchDbPassword);case 9:return t.next=11,r.db.sync(a);case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t["catch"](6),console.log("Error while syncing",t.t0),setTimeout((function(){n("sync",{loading:!1,error:null})}),3e3),t.abrupt("return",n("sync",{loading:!1,error:t.t0}));case 18:n("sync",{loading:!1,error:null}),n("handleSync",null);case 20:case"end":return t.stop()}}),t,null,[[6,13]])})))()},setWebhook:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,a=t.url,r.next=4,n("setSetting",{name:"webhook",value:{url:a}});case 4:case"end":return r.stop()}}),r)})))()},triggerWebhook:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.state,t=t||n.settings.webhook.url,t){r.next=5;break}return console.log("No webhook configured, skipping",n.settings.webhook.url),r.abrupt("return");case 5:return console.log("Sending webhook to",t),r.next=8,fetch(t,{method:"POST",body:""});case 8:return r.abrupt("return",r.sent);case 9:case"end":return r.stop()}}),r)})))()},addChart:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.dispatch,o=(new Date).toISOString(),t._id=o,s=[].concat(Object(O["a"])(n.settings.charts),[t]),r.next=6,a("setSetting",{name:"charts",value:s});case 6:case"end":return r.stop()}}),r)})))()},removeChart:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.dispatch,o=n.settings.charts.filter((function(e){return e._id!=t})),r.next=4,a("setSetting",{name:"charts",value:o});case 4:case"end":return r.stop()}}),r)})))()},updateChart:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.dispatch,o=[],n.settings.charts.forEach((function(e){e._id===t._id?o.push(t):o.push(e)})),r.next=5,a("setSetting",{name:"charts",value:o});case 5:case"end":return r.stop()}}),r)})))()},boardConfig:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,r.next=3,n("setSetting",{name:"boardConfig",value:t});case 3:case"end":return r.stop()}}),r)})))()},addAlias:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.dispatch,o=(new Date).toISOString(),t._id=o,s=[].concat(Object(O["a"])(n.settings.aliases),[t]),r.next=6,a("setSetting",{name:"aliases",value:s});case 6:case"end":return r.stop()}}),r)})))()},removeAlias:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.dispatch,o=n.settings.aliases.filter((function(e){return e._id!=t})),r.next=4,a("setSetting",{name:"aliases",value:o});case 4:case"end":return r.stop()}}),r)})))()},updateAlias:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.dispatch,o=[],n.settings.aliases.forEach((function(e){e._id===t._id?o.push(t):o.push(e)})),r.next=5,a("setSetting",{name:"aliases",value:o});case 5:case"end":return r.stop()}}),r)})))()},setSetting:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,o=t.name,s=t.value,r.prev=2,r.next=5,n.db.get(o);case 5:i=r.sent,i={_id:o,type:"settings",_rev:i._rev,value:s},r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),i={_id:o,type:"settings",value:s};case 12:return i=JSON.parse(JSON.stringify(i)),r.next=15,n.db.put(i);case 15:a("setting",{name:o,value:s});case 16:case"end":return r.stop()}}),r,null,[[2,9]])})))()},loadSettings:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,s,i,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.state,n=e.commit,a={},o=Object($["a"])(E["b"]),t.prev=3,o.s();case 5:if((s=o.n()).done){t.next=21;break}return i=s.value,c=void 0,t.prev=8,t.next=11,r.db.get(i.name);case 11:u=t.sent,c=Object(E["j"])(u),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](8),c=i.default();case 18:a[i.name]=c;case 19:t.next=5;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t["catch"](3),o.e(t.t1);case 26:return t.prev=26,o.f(),t.finish(26);case 29:n("settings",a);case 30:case"end":return t.stop()}}),t,null,[[3,23,26,29],[8,15]])})))()}},modules:{}});q.subscribe((function(e,t){var r={couchDbUrl:t.couchDbUrl,couchDbUsername:t.couchDbUsername,couchDbPassword:t.couchDbPassword,version:t.version,settings:t.settings};console.log("Updating localstorage cache…"),localStorage.setItem("state",JSON.stringify(r))}));var F=q;Object(C["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){console.log("Service worker has been registered.");var t=72e5;setInterval((function(){console.log("Checking for service worker update…"),e.update()}),t),e.update(),F.commit("serviceWorker",{registration:e})},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){console.log("New content is available; please refresh."),F.commit("serviceWorker",{updateAvailable:!0,registration:e})},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var B=r("8c4f"),I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pb-8"},[r("entry-form",{key:"timeline-"+e.$store.state.lastSync,ref:"entryForm",attrs:{"textarea-label":"Write a new entry",color:"transparent"},on:{submitted:e.handleCreated}}),r("v-divider"),r("timeline",{key:"timeline-"+e.$store.state.lastSync,ref:"timeline",staticClass:"container narrow",attrs:{entries:e.shownEntries},on:{updated:function(t){return e.$emit("updated",t)},deleted:function(t){return e.$emit("deleted",t)}}}),e.shownEntries.length<e.entries.length?r("v-container",{key:"container-"+e.$store.state.lastSync,staticClass:"narrow"},[e.showShowMoreButton?r("v-btn",{directives:[{name:"intersect",rawName:"v-intersect",value:{handler:e.showMore,options:{threshold:.5}},expression:"{\n        handler: showMore,\n        options: {\n          threshold: 0.5\n        }\n      }"}],attrs:{color:"secondary"},on:{click:function(t){return t.preventDefault(),e.showMore.apply(null,arguments)}}},[e._v("Show more")]):e._e()],1):e._e()],1)},L=[],P=(r("fb6a"),r("ddb0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._l(e.timelineRows,(function(t){return["entry"===t.type?r("v-card",{key:t.id,staticClass:"my-2",attrs:{elevation:"1",color:t.color}},[r("entry",{attrs:{row:t},on:{updated:function(t){return e.$emit("updated",t)},deleted:function(t){return e.$emit("deleted",t)}}})],1):r("h3",{key:t.repr,staticClass:"py-4 mt-4"},[r("date-entry",{attrs:{row:t}})],1)]}))],2)}),U=[],M=(r("c975"),r("d4cd")),z=r.n(M),A=new z.a({html:!0,linkify:!0,breaks:!0});A.use(r("364f")),A.use(r("4cd2"),{blockquote:"blockquote"});var W=A,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[e.isEditing?r("v-card-text",[r("entry-form",{key:"timeline-"+e.$store.state.lastSync,ref:"entryForm",attrs:{"textarea-label":"Update entry",entry:e.row.entry,"initial-text":e.row.entry.text,color:"transparent"},on:{submitted:e.update,cancel:function(t){e.isEditing=!1}}})],1):r("v-card-text",{class:e.$theme.card.textSize},[r("v-badge",{staticStyle:{display:"block !important"},attrs:{color:e.row.color,dot:""}},[r("div",{staticClass:"rendered-markdown grey--text text--lighten-2",domProps:{innerHTML:e._s(e.expand?e.row.text:e.truncatedText)}})]),e.isTruncated?r("div",[r("v-btn",{staticClass:"mt-4",attrs:{small:""},on:{click:function(t){e.expand=!e.expand}}},[e.expand?[e._v(" Collapse "),r("v-icon",[e._v(e._s(e.$icons.mdiChevronUp))])]:[e._v(" Expand "),r("v-icon",[e._v(e._s(e.$icons.mdiChevronDown))])]],2)],1):e._e()],1),r("v-lazy",{attrs:{options:{threshold:.5},"min-height":"50",transition:"fade-transition"}},[r("v-card-actions",[r("time",{staticClass:"text-body-2 grey--text text--darken-1",attrs:{date:e.row.entry.fullDate.toISOString(),title:e.row.entry.fullDate.toISOString()}},[r("v-icon",{attrs:{small:"",color:"grey darken-2"}},[e._v(e._s(e.$icons.mdiClockOutline))]),e._v(" "+e._s(e.row.time)+" ")],1),r("v-spacer"),r("v-btn",{staticClass:"px-1",attrs:{icon:"",small:"",color:"grey darken-2",title:"Edit"},on:{click:function(t){e.isEditing=!e.isEditing}}},[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.$icons.mdiPencil))])],1),r("v-btn",{staticClass:"px-1",attrs:{icon:"",small:"",color:"grey darken-2",title:"Copy to clipboard"},on:{click:function(t){return e.copyToClipboard(e.row.entry.text)}}},[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.$icons.mdiContentCopy))])],1),r("v-btn",{staticClass:"px-1",attrs:{icon:"",small:"",color:"grey darken-2",title:"Delete"},on:{click:function(t){e.deleteDialog=!0}}},[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.$icons.mdiDelete))])],1),r("v-dialog",{attrs:{"max-width":"400"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",{attrs:{color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Delete this entry?")]),r("v-card-text",[e._v(" This action is irreversible. ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.deleteDialog=!1,e.handleDelete()}}},[e._v(" Delete ")])],1)],1)],1)],1)],1)],1)},H=[],J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{color:e.color,outlined:""}},[r("v-container",{class:["narrow mt-4"]},[r("v-textarea",{ref:"textarea",attrs:{clearable:"",outlined:"",name:e.name,id:"composer","auto-grow":"",autofocus:"",label:e.textareaLabel,placeholder:"How do you feel?"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?t.shiftKey||t.altKey||t.metaKey?null:e.submit.apply(null,arguments):null}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),r("div",{staticClass:"d-flex align-top justify-space-between"},[r("div",[r("v-switch",{staticClass:"mt-1",attrs:{label:"Set date..."},model:{value:e.showDateField,callback:function(t){e.showDateField=t},expression:"showDateField"}}),e.showDateField?[r("v-text-field",{attrs:{label:"Date",type:"datetime-local",max:(new Date).toLocaleDateString("en-ca")},model:{value:e.textDate,callback:function(t){e.textDate=t},expression:"textDate"}}),r("v-btn",{attrs:{small:""},on:{click:function(t){t.preventDefault(),e.date=new Date}}},[e._v(" Set to now ")])]:e._e()],2),r("div",[e.entry?r("v-btn",{attrs:{text:"",small:""},on:{click:function(t){return e.$emit("cancel")}}},[e._v(" Cancel ")]):e._e(),r("v-btn",{attrs:{color:e.$theme.mainButton.color},on:{click:e.submit}},[e._v("Save")])],1)])],1)],1)},Y=[],Q=r("b166"),K=r("0f32"),G=r.n(K),X={props:{entry:{type:Object,default:null},name:{type:String,default:"how"},initialText:{type:String,default:""},textareaLabel:{type:String,default:"Entry content"},color:{type:String,default:""}},data:function(){return{text:this.initialText,dateDialog:!1,date:null,textDate:null,maxDate:null,showDateField:!1}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.entry?(e.text=e.entry.text,e.date=new Date(e.entry.fullDate)):e.text||(e.text=localStorage.getItem("entry-draft"));case 1:case"end":return t.stop()}}),t)})))()},methods:{submit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.text){t.next=2;break}return t.abrupt("return");case 2:if(!e.entry){t.next=8;break}return t.next=5,e.update();case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,e.addNew();case 10:r=t.sent;case 11:return e.$emit("submitted",r),t.next=14,e.$store.dispatch("triggerWebhook");case 14:case"end":return t.stop()}}),t)})))()},addNew:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.date?new Date(e.date):new Date,n=Object(D["a"])({},Object(E["f"])(e.text),{date:r.toISOString()}),n._id=n.date,t.next=5,e.$store.dispatch("addEntry",n);case 5:return a=t.sent,e.$emit("created",a),e.text="",e.date=null,t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new Date(e.date||e.entry.date),n=Object(D["a"])({},Object(E["f"])(e.text),{_rev:e.entry._rev,_id:e.entry._id,date:r.toISOString()}),t.next=4,e.$store.dispatch("updateEntry",n);case 4:return a=t.sent,e.$emit("updated",a),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))()}},watch:{date:{handler:function(e){this.textDate=e?Object(Q["a"])(e,"yyyy-MM-dd'T'HH:mm"):null},immediate:!0},textDate:{handler:function(e){e&&(this.date=new Date(e))},immediate:!0},text:{handler:G()((function(e){this.entry||localStorage.setItem("entry-draft",e||"")}),1e3,{leading:!0,trailing:!0})}}},Z=X,ee=r("b0af"),te=r("b73d"),re=r("a844"),ne=Object(u["a"])(Z,J,Y,!1,null,null,null),ae=ne.exports;d()(ne,{VBtn:v["a"],VCard:ee["a"],VContainer:m["a"],VSwitch:te["a"],VTextField:w["a"],VTextarea:re["a"]});var oe=r("59f0");oe["a"].setup({byWords:!0,length:60,keepWhitespaces:!0});var se={props:{row:Object},components:{EntryForm:ae},data:function(){return{deleteDialog:!1,isEditing:!1,currentEntry:this.row.rawEntry,expand:!1}},computed:{truncatedText:function(){return Object(oe["a"])(this.row.text)},isTruncated:function(){return this.truncatedText.length<this.row.text.length}},methods:{copyToClipboard:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.clipboard.writeText(e);case 2:case"end":return t.stop()}}),t)})))()},update:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.currentEntry=e,t.$emit("updated",e);case 2:case"end":return r.stop()}}),r)})))()},handleDelete:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.state.db.remove(e.row.rawEntry);case 2:return e.$emit("deleted",e.row.rawEntry),t.next=5,e.$store.dispatch("forceSync");case 5:return t.next=7,e.$store.dispatch("triggerWebhook");case 7:case"end":return t.stop()}}),t)})))()}}},ie=se,ce=r("4ca6"),ue=r("99d9"),le=r("169a"),de=r("b687"),pe=Object(u["a"])(ie,N,H,!1,null,null,null),he=pe.exports;d()(pe,{VBadge:ce["a"],VBtn:v["a"],VCard:ee["a"],VCardActions:ue["a"],VCardText:ue["b"],VCardTitle:ue["c"],VDialog:le["a"],VIcon:g["a"],VLazy:de["a"],VSpacer:y["a"]});var fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"font-weight-light text--lighten"},[e._v(" "+e._s(e.row.repr)+" ")])},ve=[],me={props:{row:Object}},ge=me,be=Object(u["a"])(ge,fe,ve,!1,null,null,null),ye=be.exports,we=[{id:"day",repr:function(e){return e.fullDate.toDateString()}}];function xe(e,t,r,n){var a=[];return n?e.forEach((function(e){t[e.id]=[{repr:e.repr(r),entries:[r]}]})):e.forEach((function(e){var n=t[e.id][t[e.id].length-1];e.repr(r)===n.repr?n.entries.push(r):(a.push(Object(D["a"])({type:e.id},n)),t[e.id].push({repr:e.repr(r),entries:[r]}))})),a}function ke(e,t,r){var n=[],a=[];return t.forEach((function(t){e.forEach((function(e){r[e.id].forEach((function(r){-1===a.indexOf(r)&&e.repr(t.entry)===r.repr&&(a.push(r),n.push(r))}))})),n.push(t)})),n}var _e={props:["entries"],components:{Entry:he,DateEntry:ye},computed:{timelineRows:function(){var e={},t=[],r=Object(O["a"])(this.entries);return r.forEach((function(r){var n=Object(E["e"])(r),a={text:W.render(Object(E["m"])(n.text)),id:Math.random(),color:"grey",type:"entry",entry:n,rawEntry:r,time:Object(E["g"])(n.fullDate)},o=" accent-";n.mood>0?a.color="light-green"+o+Math.min(n.mood+1,4):n.mood<0&&(a.color="deep-orange"+o+Math.min(Math.abs(n.mood)+1,4)),xe(we,e,n,0===t.length),t.push(a)})),t=ke(we,t,e),t}}},Ce=_e,$e=Object(u["a"])(Ce,P,U,!1,null,null,null),Oe=$e.exports;d()($e,{VCard:ee["a"]});var De=r("b047"),Se=r.n(De),Te={props:{allEntries:Array},components:{Timeline:Oe,EntryForm:ae},data:function(){return{showEntryModal:!1,showShowMoreButton:!1,count:this.$store.state.pageSize,sortDesc:!0}},computed:{entries:function(){var e=Object(O["a"])(this.allEntries);return this.sortDesc&&e.reverse(),e},shownEntries:function(){return this.entries.slice(0,this.count)}},methods:{handleCreated:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$emit("created",e);case 1:case"end":return r.stop()}}),r)})))()},showMore:Se()((function(e){e&&!e[0].isIntersecting||(this.count+=this.$store.state.pageSize)}),1e3,{leading:!0,trailing:!1,maxWait:500})},watch:{shownEntries:function(){var e=this;setTimeout((function(){e.showShowMoreButton=!0}),1e3)}}},je=Te,Re=r("ce7e"),Ee=r("269a"),Ve=r.n(Ee),qe=r("90a2"),Fe=Object(u["a"])(je,I,L,!1,null,null,null),Be=Fe.exports;d()(Fe,{VBtn:v["a"],VContainer:m["a"],VDivider:Re["a"]}),Ve()(Fe,{Intersect:qe["a"]});var Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-container",{staticClass:"narrow"},[r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Options")]),r("v-card-text",{class:e.$theme.card.textSize},[r("v-text-field",{attrs:{type:"number",step:"1",label:"Days to show"},model:{value:e.graphDays,callback:function(t){e.graphDays=t},expression:"graphDays"}})],1)],1),r("v-btn",{staticClass:"mb-4",attrs:{color:e.$theme.mainButton.color},on:{click:function(t){e.showvisualizationModal=!0}}},[r("v-icon",[e._v(e._s(e.$icons.mdiPlus))]),e._v(" Add a new visualization ")],1)],1),r("v-divider"),r("v-container",{staticClass:"narrow mt-4"},[r("dataviz",{attrs:{entries:e.queryableEntries,tags:e.queryableTags,days:e.graphDays}}),r("visualization-modal",{attrs:{days:e.graphDays,entries:e.queryableEntries,tags:e.queryableTags,show:e.showvisualizationModal},on:{"update:show":function(t){e.showvisualizationModal=t}}})],1)],1)},Le=[],Pe=r("5f09"),Ue={props:{allEntries:Array},components:{VisualizationModal:Pe["default"],Dataviz:function(){return r.e("visualization~31ecd969").then(r.bind(null,"f3da"))}},data:function(){return{showvisualizationModal:!1,graphDays:60}},computed:{entries:function(){return this.allEntries},queryableEntries:function(){return Object(E["h"])(this.entries,this.graphDays)},queryableTags:function(){return Object(E["i"])(this.queryableEntries)}}},Me=Ue,ze=Object(u["a"])(Me,Ie,Le,!1,null,null,null),Ae=ze.exports;d()(ze,{VBtn:v["a"],VCard:ee["a"],VCardText:ue["b"],VCardTitle:ue["c"],VContainer:m["a"],VDivider:Re["a"],VIcon:g["a"],VTextField:w["a"]});var We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pb-8"},[r("v-container",[r("v-tabs",{attrs:{"show-arrows":"",centered:"",height:"36","background-color":"transparent"}},[r("v-tab",{key:e.entries.length,attrs:{to:{path:"/diary",query:{q:e.query}},exact:""}},[e._v(" Entries · "+e._s(e.entries.length)+" ")]),r("v-tab",{attrs:{to:{path:"/diary/calendar",query:{q:e.query}}}},[e._v("Calendar")]),r("v-tab",{attrs:{to:{path:"/diary/visualization",query:{q:e.query}}}},[e._v("Visualization")])],1)],1),r("router-view",{attrs:{"all-entries":e.entries},on:{deleted:e.handleDelete,updated:e.handleUpdate,created:e.handleCreated}})],1)},Ne=[],He=(r("ac1f"),r("841c"),{props:{query:String},data:function(){return{entries:[]}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.search();case 1:case"end":return t.stop()}}),t)})))()},methods:{handleCreated:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.entries.push(e);case 1:case"end":return r.stop()}}),r)})))()},handleDelete:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.entries=t.entries.filter((function(t){return t._id!=e._id}));case 1:case"end":return r.stop()}}),r)})))()},handleUpdate:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.entries.forEach((function(t){t._id===e._id&&Object.assign(t,e)}));case 1:case"end":return r.stop()}}),r)})))()},search:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["n"])({store:e.$store,sortDesc:e.sortDesc,query:e.query});case 2:e.entries=t.sent;case 3:case"end":return t.stop()}}),t)})))()}},watch:{query:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.search();case 2:case"end":return t.stop()}}),t)})))()},"$store.state.lastSync":{handler:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.search();case 2:case"end":return t.stop()}}),t)})))()}}}}),Je=He,Ye=r("71a3"),Qe=r("fe57"),Ke=Object(u["a"])(Je,We,Ne,!1,null,null,null),Ge=Ke.exports;d()(Ke,{VContainer:m["a"],VTab:Ye["a"],VTabs:Qe["a"]});var Xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-container",[r("v-sheet",{attrs:{tile:""}},[r("v-toolbar",{attrs:{dense:"",flat:""}},[e.$refs.calendar?r("v-toolbar-title",[e._v(" "+e._s(e.$refs.calendar.title)+" ")]):e._e(),r("v-spacer"),r("v-switch",{staticClass:"mt-5",attrs:{label:"Show all events"},model:{value:e.expanded,callback:function(t){e.expanded=t},expression:"expanded"}})],1),r("v-toolbar",{attrs:{dense:"",flat:""}},[r("v-menu",{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[r("v-btn",e._g(e._b({attrs:{outlined:"",small:""}},"v-btn",a,!1),n),[r("span",[e._v(e._s(e.type))]),r("v-icon",{attrs:{right:""}},[e._v(" "+e._s(e.$icons.mdiMenuDown)+" ")])],1)]}}])},[r("v-list",[r("v-list-item",{on:{click:function(t){e.type="day"}}},[r("v-list-item-title",[e._v("Day")])],1),r("v-list-item",{on:{click:function(t){e.type="week"}}},[r("v-list-item-title",[e._v("Week")])],1),r("v-list-item",{on:{click:function(t){e.type="month"}}},[r("v-list-item-title",[e._v("Month")])],1)],1)],1),r("v-spacer"),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.$refs.calendar.prev()}}},[r("v-icon",[e._v(e._s(e.$icons.mdiChevronLeft))]),e._v(" Previous ")],1),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.$refs.calendar.next()}}},[e._v(" Next "),r("v-icon",[e._v(e._s(e.$icons.mdiChevronRight))])],1),r("v-spacer"),r("v-btn",{attrs:{outlined:"",small:""},on:{click:e.setToday}},[e._v(" Today ")])],1)],1),r("v-sheet",{attrs:{height:e.expanded?"":"60vh","min-height":e.expanded?"":600}},[r("v-calendar",{ref:"calendar",attrs:{weekdays:e.weekday,type:e.type,events:e.events,"event-overlap-mode":e.mode,"event-overlap-threshold":30},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.viewDay},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),r("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[r("v-card",{attrs:{"min-width":"350px","max-width":"350px"}},[r("v-card-text",[r("span",{domProps:{innerHTML:e._s(e.renderMarkdown(e.selectedEvent.details))}})])],1)],1)],1)],1)],1)},Ze=[],et={props:{allEntries:Array},data:function(){return{type:"month",types:["month","week","day","4day"],mode:"stack",modes:["stack","column"],weekday:[1,2,3,4,5,6,0],weekdays:[{text:"Sun - Sat",value:[0,1,2,3,4,5,6]},{text:"Mon - Sun",value:[1,2,3,4,5,6,0]},{text:"Mon - Fri",value:[1,2,3,4,5]},{text:"Mon, Wed, Fri",value:[1,3,5]}],value:"",selectedEvent:{},selectedElement:null,selectedOpen:!1,expanded:!1}},mounted:function(){this.$refs.calendar.checkChange()},computed:{events:function(){var e=this;return this.allEntries.map((function(t){return{start:new Date(t.date),name:t.text,details:t.text,color:e.getEventColor(t),timed:!0}}))}},methods:{setToday:function(){this.value=""},viewDay:function(e){var t=e.date;this.value=t,"day"!=this.type?this.type="day":this.type="month"},getEventColor:function(e){var t=(e.tags||[]).filter((function(e){return"!"===e.sign})).length>0;return void 0===e.mood?"":t&&e.mood<0?"red accent-4":-1===e.mood?"amber darken-2":e.mood<-1?"red darken-1":t&&e.mood>0?"green accent-4":1===e.mood?"light-green":e.mood>1?"green darken-3":"grey darken-2"},showEvent:function(e){var t=this,r=e.nativeEvent,n=e.event,a=function(){t.selectedEvent=n,t.selectedElement=r.target,requestAnimationFrame((function(){return requestAnimationFrame((function(){return t.selectedOpen=!0}))}))};this.selectedOpen?(this.selectedOpen=!1,requestAnimationFrame((function(){return requestAnimationFrame((function(){return a()}))}))):a(),r.stopPropagation()},renderMarkdown:function(e){return W.render(Object(E["m"])(e))}}},tt=et,rt=r("a4f6"),nt=r("8860"),at=r("da13"),ot=r("5d23"),st=r("e449"),it=r("8dd9"),ct=r("71d9"),ut=Object(u["a"])(tt,Xe,Ze,!1,null,null,null),lt=ut.exports;d()(ut,{VBtn:v["a"],VCalendar:rt["a"],VCard:ee["a"],VCardText:ue["b"],VContainer:m["a"],VIcon:g["a"],VList:nt["a"],VListItem:at["a"],VListItemTitle:ot["b"],VMenu:st["a"],VSheet:it["a"],VSpacer:y["a"],VSwitch:te["a"],VToolbar:ct["a"],VToolbarTitle:x["b"]});var dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("About Tempo")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v(" Tempo is a personnal log and mood tracker. You can use it to track what's going on in your life and how different events affect your well-being. ")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Features")]),r("v-card-text",{class:e.$theme.card.textSize},[r("ul",[r("li",[e._v("Markdown syntax")]),r("li",[r("a",{attrs:{href:"#private"}},[e._v("Private by design")])]),r("li",[r("a",{attrs:{href:"#offline"}},[e._v("Offline first")])]),r("li",[r("a",{attrs:{href:"#mood-tracking"}},[e._v("Mood tracking")])]),r("li",[r("a",{attrs:{href:"#search"}},[e._v("Powerful tagging and filtering")])]),r("li",[r("a",{attrs:{href:"#software"}},[e._v("Powered by free and open-source software")])])])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("How does it work?")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v(" Use Tempo as you would use a personnal log. Write notes when you feel like it, and use hashtags and moodtags to indicate how you feel. ")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Where is the data stored?")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("The data never leaves your browser and isn't sent to any third-party or server. The only exception to that is when you enable (optional) syncing with other devices, through a CouchDB server of your choice.")]),r("p",[e._v("All your data can also be exported in JSON and Markdown format at any time.")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"offline",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Does it work offline?")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Yes! Tempo is a Progressive Web App (PWA) and can be accessed and used even without an internet connection.")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Hashtags")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v(" While entirely optional, hashtags and moodtags can help you categorize your notes and track your moods. Here is a sample note using hashtags: ")]),r("blockquote",{staticClass:"blockquote"},[e._v(" Had a great day at "),r("a",{attrs:{href:""}},[e._v("#work!")])]),r("p",[e._v("Hashtags can help you to categorize your notes and search them later.")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"mood-tracking",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Moodtags")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Moodtags work similarly, but allow you to associate a mood with a given word. For instance:")]),r("blockquote",{staticClass:"blockquote"},[e._v(" Stephanie and I had an argument. I feel "),r("a",{attrs:{href:""}},[e._v("--angry")]),e._v(" and "),r("a",{attrs:{href:""}},[e._v("-confused")]),e._v("… ")]),r("p",[e._v(" By using the "),r("code",[e._v("-")]),e._v(" tag, you indicate to Tempo that "),r("code",[e._v("angry")]),e._v(" and "),r("code",[e._v("confused")]),e._v(" are negative feelings. Similarly, you could use the "),r("code",[e._v("+")]),e._v(" tag in front of a word to indicate a positive feeling. You can repeat these signs up to three time to indicate a greater intensity. ")]),r("p",[e._v(" When present, "),r("code",[e._v("-")]),e._v(" and "),r("code",[e._v("+")]),e._v(" tags are used to compute the mood score of each note. This score is then used in the daily mood widget to track your moods over time. ")]),r("p",[e._v(" Each occurence of "),r("code",[e._v("-")]),e._v(" and "),r("code",[e._v("+")]),e._v(" in a note will decrease or increase the mood score by 1. ")]),r("p",[e._v(" There are a couple additional tags you can use, that don't affect the mood score, but can be useful regardless: ")]),r("ul",[r("li",[r("code",[e._v("~")]),e._v(": indicate mixed feelings")]),r("li",[r("code",[e._v("?")]),e._v(": indicate you don't know how you feel")]),r("li",[r("code",[e._v("!")]),e._v(": indicate that something is important")])]),r("p",[e._v(" You can freely mix any and all these tags in the same note, and use different moodtags with the same words. For instance: ")]),r("blockquote",{staticClass:"blockquote"},[e._v(" I hate insomnia, I'm feeling so "),r("a",{attrs:{href:""}},[e._v("---tired")]),e._v("… ")]),r("blockquote",{staticClass:"blockquote"},[e._v(" Had a good sport session this morning, I'm "),r("a",{attrs:{href:""}},[e._v("+tired")]),e._v(" but happy. ")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"search",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Search and filter notes")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v(" The search bar let you filter notes that match your query. The daily mood widget is also updated accordingly. You can find some basic queries below: ")]),r("v-simple-table",{staticClass:"mb-2",scopedSlots:e._u([{key:"default",fn:function(){return[r("tbody",[r("tr",[r("td",[r("code",[e._v("sport")])]),r("td",[e._v(' Find all the entries containing the word "sport" ')])]),r("tr",[r("td",[r("code",[e._v("tag:sport")])]),r("td",[e._v(" Find all the entries tagged with sport ")])]),r("tr",[r("td",[r("code",[e._v("-sport")])]),r("td",[e._v(" Find all the entries tagged with -sport ")])]),r("tr",[r("td",[r("code",[e._v("@2020-09-17")])]),r("td",[e._v(" Find all the entries submitted on 2020-09-17 ")])]),r("tr",[r("td",[r("code",[e._v("@2020")])]),r("td",[e._v(" Find all the entries submitted during 2020 ")])]),r("tr",[r("td",[r("code",[e._v("@2020-08")])]),r("td",[e._v(" Find all the entries submitted during 2020-08 ")])]),r("tr",[r("td",[r("code",[e._v("+")])]),r("td",[e._v(" Find all entries with a positive moodtag (also works with "),r("code",[e._v("-")]),e._v(", "),r("code",[e._v("?")]),e._v(", "),r("code",[e._v("!")]),e._v(" and "),r("code",[e._v("~")]),e._v(") ")])])])]},proxy:!0}])}),r("p",[e._v(" You can mix various parameters to further refine your results. Here are some more advanced queries: ")]),r("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[r("tbody",[r("tr",[r("td",[r("code",[e._v("+ @2020-09")])]),r("td",[e._v(" Find all positive entries submitted during 2020-09 ")])]),r("tr",[r("td",[r("code",[e._v("- tag:sleep")])]),r("td",[e._v(" Find all negative entries also tagged with sleep ")])]),r("tr",[r("td",[r("code",[e._v("tag:sleep, tag:nap")])]),r("td",[e._v(" Find all entries tagged with sleep or nap ")])])])]},proxy:!0}])})],1)],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"software",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Tempo is powered by free and open-source software")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[r("a",{attrs:{href:"https://code.eliotberriot.com/eliotberriot/tempo"}},[e._v("Source code is publicly available")]),e._v(" and can be reused, modified and self-hosted according to your needs. ")])])],1)],1)},pt=[],ht={},ft=ht,vt=r("1f4f"),mt=Object(u["a"])(ft,dt,pt,!1,null,null,null),gt=mt.exports;d()(mt,{VCard:ee["a"],VCardText:ue["b"],VCardTitle:ue["c"],VSimpleTable:vt["a"]});var bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Settings")])],1),r("v-card",{staticClass:"section mb-8",attrs:{tag:"form",id:"aliases",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Aliases")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v(" Aliases let you save and reuse search queries. For instance, you could set a "),r("code",[e._v("$dreams")]),e._v(" alias in place of a "),r("code",[e._v("dream, dreamed, dreams, nightmare, nightmares")]),e._v(" query. ")]),r("v-form",[e._l(e.$store.state.settings.aliases,(function(e){return r("alias-form",{key:e._id,attrs:{alias:e}})})),r("alias-form",{key:String(e.lastAliasesUpdate),on:{created:function(t){e.lastAliasesUpdate=new Date}}})],2)],1)],1),r("v-card",{staticClass:"section mb-8",attrs:{tag:"form",id:"export",color:e.$theme.card.color},on:{submit:function(t){return t.preventDefault(),e.exportData.apply(null,arguments)}}},[r("v-card-title",{staticClass:"headline"},[e._v("Export data")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Export selected data into a JSON file for backup and restore purpose.")]),r("v-checkbox",{attrs:{"hide-details":"",label:"Export diary notes"},model:{value:e.exportConfig.entries,callback:function(t){e.$set(e.exportConfig,"entries",t)},expression:"exportConfig.entries"}}),r("v-checkbox",{attrs:{"hide-details":"",label:"Export tasks and board configuration"},model:{value:e.exportConfig.board,callback:function(t){e.$set(e.exportConfig,"board",t)},expression:"exportConfig.board"}}),r("v-checkbox",{attrs:{"hide-details":"",label:"Export Tempo settings"},model:{value:e.exportConfig.settings,callback:function(t){e.$set(e.exportConfig,"settings",t)},expression:"exportConfig.settings"}})],1),r("v-card-actions",[r("v-btn",{attrs:{color:"primary",type:"submit"}},[e._v("Export")])],1)],1),r("v-card",{staticClass:"section mb-8",attrs:{tag:"form",id:"import",color:e.$theme.card.color},on:{submit:function(t){return t.preventDefault(),e.importData.apply(null,arguments)}}},[r("v-card-title",{staticClass:"headline"},[e._v("Import data")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Import data from a previously generated Tempo JSON File. Existing notes and tasks will be kept.")]),r("v-file-input",{attrs:{accept:".json,application/json",label:"JSON File"},model:{value:e.toImportFile,callback:function(t){e.toImportFile=t},expression:"toImportFile"}}),r("v-checkbox",{attrs:{"hide-details":"",label:"Import diary notes"},model:{value:e.importConfig.entries,callback:function(t){e.$set(e.importConfig,"entries",t)},expression:"importConfig.entries"}}),r("v-checkbox",{attrs:{"hide-details":"",label:"Import tasks and board configuration"},model:{value:e.importConfig.board,callback:function(t){e.$set(e.importConfig,"board",t)},expression:"importConfig.board"}}),r("v-checkbox",{attrs:{"hide-details":"",label:"Import Tempo settings"},model:{value:e.importConfig.settings,callback:function(t){e.$set(e.importConfig,"settings",t)},expression:"importConfig.settings"}}),e.importLogs.length>0?r("v-textarea",{attrs:{readonly:"",value:e.importLogs.join("\n"),"auto-grow":""}}):e._e()],1),r("v-card-actions",[r("v-btn",{attrs:{color:"primary",type:"submit",disabled:!e.toImportFile}},[e._v("Import")])],1)],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"sync",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Syncing with other devices")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Your diary can be synced with other devices using any "),r("a",{attrs:{href:"https://couchdb.apache.org/"}},[e._v("CouchDB server")]),e._v(". This is not provided as part of Tempo though, and you have to find or host one yourself.")]),r("v-form",[r("v-text-field",{attrs:{label:"CouchDB URL",name:"couchdb-url",placeholder:"http://localhost:5984/tempo",required:""},model:{value:e.couchDbUrl,callback:function(t){e.couchDbUrl=t},expression:"couchDbUrl"}}),r("v-text-field",{attrs:{label:"CouchDB Username",name:"couchdb-username",required:""},model:{value:e.couchDbUsername,callback:function(t){e.couchDbUsername=t},expression:"couchDbUsername"}}),r("v-text-field",{staticClass:"input-group--focused",attrs:{"append-icon":e.showdbPassword?e.$icons.mdiEye:e.$icons.mdiEyeOff,type:e.showdbPassword?"text":"password",name:"couchdb-password",required:"",label:"CouchDB Password"},on:{"click:append":function(t){e.showdbPassword=!e.showdbPassword}},model:{value:e.couchDbPassword,callback:function(t){e.couchDbPassword=t},expression:"couchDbPassword"}}),r("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.setupSync}},[e._v(" Setup sync ")]),e.syncStatus?r("span",[e._v(e._s(e.syncStatus))]):e._e()],1)],1)],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"webhook",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Webhook")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Notify an URL via a POST request when an entry is created, updated or deleted.")]),r("v-text-field",{attrs:{label:"Webhook URL",name:"webhookurl",type:"url",required:""},model:{value:e.webhook.url,callback:function(t){e.$set(e.webhook,"url",t)},expression:"webhook.url"}}),r("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.webhook.url},on:{click:function(t){return e.triggerWebhook(e.webhook.url)}}},[e._v(" Send webhook now ")]),r("v-btn",{attrs:{color:"primary",disabled:!e.webhook.url},on:{click:function(t){return e.$store.dispatch("setWebhook",{url:e.webhook.url})}}},[e._v(" Save ")])],1)],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"delete",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Delete your data")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Delete all your data from Tempo.")]),r("v-btn",{attrs:{color:"error"},on:{click:e.deleteConfirm}},[e._v(" Delete my data… ")])],1)],1)],1)},yt=[],wt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"3"}},[r("v-text-field",{attrs:{label:"Name",placeholder:"dreams",prefix:"$","hide-details":"",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{label:"Query",placeholder:"dreams, nightmares",hint:e.matchingEntries+" matching entries.",required:""},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1),r("v-col",{attrs:{cols:"12",sm:"3"}},[r("v-btn",{staticClass:"mt-4",attrs:{text:"",type:"submit"}},[e._v("Save")]),e.alias?r("v-btn",{staticClass:"mt-4",attrs:{text:"",icon:"",title:"Delete",type:"noop"},on:{click:function(t){return t.preventDefault(),e.$store.dispatch("removeAlias",e.alias._id)}}},[r("v-icon",[e._v(e._s(e.$icons.mdiDeleteOutline))])],1):e._e()],1)],1)],1)},xt=[],kt={props:{alias:{required:!1}},data:function(){return{query:this.alias?this.alias.query:"",name:this.alias?this.alias.name:"",matchingEntries:0}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.updateMatchingEntries(e.query);case 2:case"end":return t.stop()}}),t)})))()},computed:{aliasConfig:function(){var e=this.alias||{};return Object(D["a"])({},e,{},{name:this.name,query:this.query})}},methods:{submit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.aliasConfig.name&&e.aliasConfig.query){t.next=2;break}return t.abrupt("return");case 2:if(!e.alias){t.next=7;break}return t.next=5,e.update();case 5:t.next=9;break;case 7:return t.next=9,e.addNew();case 9:case"end":return t.stop()}}),t)})))()},addNew:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("addAlias",e.aliasConfig);case 2:r=t.sent,e.$emit("created",r);case 4:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("updateAlias",e.aliasConfig);case 2:r=t.sent,e.$emit("updated",r);case 4:case"end":return t.stop()}}),t)})))()},updateMatchingEntries:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.matchingEntries=0,!e){r.next=6;break}return r.next=4,Object(E["n"])({store:t.$store,sortDesc:!1,query:t.query});case 4:n=r.sent,t.matchingEntries=n.length;case 6:case"end":return r.stop()}}),r)})))()}},watch:{query:{handler:Se()(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateMatchingEntries(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),500)}}},_t=kt,Ct=r("62ad"),$t=r("4bd4"),Ot=r("0fd9"),Dt=Object(u["a"])(_t,wt,xt,!1,null,null,null),St=Dt.exports;function Tt(e,t,r){return jt.apply(this,arguments)}function jt(){return jt=Object(s["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=t||[],n.push("[info] Importing ".concat(t.length," notes...")),e.next=4,Object(E["c"])(t,r);case 4:return a=e.sent,o=a.filter((function(e){return e.ok})).length,s=a.filter((function(e){return!e.ok})).length,s>0&&n.push("[error] ".concat(s," notes failed to import")),o>0&&n.push("[info] ".concat(o," notes imported successfully...")),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),jt.apply(this,arguments)}function Rt(e,t,r,n){return Et.apply(this,arguments)}function Et(){return Et=Object(s["a"])(regeneratorRuntime.mark((function e(t,r,n,a){var o,s,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&t.settings){e.next=2;break}return e.abrupt("return",a.push("[error] Invalid board configuration, skipping"));case 2:return a.push("[info] Importing board configuration..."),e.next=5,n("boardConfig",t.settings);case 5:return o=t.tasks||[],a.push("[info] Importing ".concat(o.length," tasks...")),e.next=9,Object(E["c"])(o,r);case 9:return s=e.sent,i=s.filter((function(e){return e.ok})).length,c=s.filter((function(e){return!e.ok})).length,c>0&&a.push("[error] ".concat(c," tasks failed to import")),i>0&&a.push("[info] ".concat(i," tasks imported successfully...")),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)}))),Et.apply(this,arguments)}function Vt(e,t,r){return qt.apply(this,arguments)}function qt(){return qt=Object(s["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=t||[],n.push("[info] Importing ".concat(t.length," settings...")),e.next=4,Object(E["c"])(t,r);case 4:return a=e.sent,o=a.filter((function(e){return e.ok})).length,s=a.filter((function(e){return!e.ok})).length,s>0&&n.push("[error] ".concat(s," settings failed to import")),o>0&&n.push("[info] ".concat(o," settings imported successfully...")),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),qt.apply(this,arguments)}d()(Dt,{VBtn:v["a"],VCol:Ct["a"],VForm:$t["a"],VIcon:g["a"],VRow:Ot["a"],VTextField:w["a"]});var Ft={components:{AliasForm:St},data:function(){return{lastAliasesUpdate:new Date,exportConfig:{entries:!0,board:!0,settings:!0},importConfig:{entries:!0,board:!0,settings:!0},importLogs:[],syncStatus:null,toImportFile:null,showdbPassword:!1,couchDbUrl:this.$store.state.couchDbUrl,couchDbUsername:this.$store.state.couchDbUsername,couchDbPassword:this.$store.state.couchDbPassword,webhook:this.$store.state.settings.webhook||{url:""}}},methods:{exportData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={},!e.exportConfig.entries){t.next=5;break}return t.next=4,Object(E["n"])({store:e.$store,sortDesc:!1,query:""});case 4:r.entries=t.sent;case 5:if(!e.exportConfig.board){t.next=11;break}return t.t0=e.$store.state.settings.boardConfig,t.next=9,Object(E["l"])(e.$store,"");case 9:t.t1=t.sent,r.board={settings:t.t0,tasks:t.t1};case 11:if(!e.exportConfig.settings){t.next=16;break}return t.next=14,Object(E["k"])(e.$store);case 14:n=t.sent,r.settings=n.filter((function(e){return"boardConfig"!=e._id}));case 16:a=(new Date).toISOString().slice(0,16),Object(E["d"])(window,document,JSON.stringify(r),"application/json","tempo_export_".concat(a,".json"));case 18:case"end":return t.stop()}}),t)})))()},triggerWebhook:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("forceSync");case 2:return r.next=4,t.$store.dispatch("triggerWebhook",e);case 4:case"end":return r.stop()}}),r)})))()},importData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.importLogs=[],e.toImportFile){t.next=4;break}return console.log("No file to import"),t.abrupt("return");case 4:return e.importLogs.push("[info] Loading file..."),t.next=7,e.toImportFile.text();case 7:if(r=t.sent,e.importLogs.push("[info] Parsing file..."),n=JSON.parse(r),!e.importConfig.entries){t.next=13;break}return t.next=13,Tt(n.entries,e.$store.state.db,e.importLogs);case 13:if(!e.importConfig.board){t.next=16;break}return t.next=16,Rt(n.board,e.$store.state.db,e.$store.dispatch,e.importLogs);case 16:if(!e.importConfig.settings){t.next=21;break}return t.next=19,Vt(n.settings,e.$store.state.db,e.importLogs);case 19:return t.next=21,e.$store.dispatch("loadSettings");case 21:e.importLogs.push("[info] Import complete!");case 22:case"end":return t.stop()}}),t)})))()},deleteConfirm:function(){confirm("This will remove all your notes. This action is irreversible.")&&(this.$store.dispatch("reset"),this.importedEntries=0,this.failedEntries=0)},setupSync:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.syncStatus="Checking sync...",t.prev=1,t.next=4,e.$store.dispatch("setupSync",{url:e.couchDbUrl,username:e.couchDbUsername,password:e.couchDbPassword});case 4:e.syncStatus="Sync OK!",t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.syncStatus="Error: ".concat(t.t0.name||t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}},Bt=Ft,It=r("ac7c"),Lt=r("23a7"),Pt=Object(u["a"])(Bt,bt,yt,!1,null,null,null),Ut=Pt.exports;d()(Pt,{VBtn:v["a"],VCard:ee["a"],VCardActions:ue["a"],VCardText:ue["b"],VCardTitle:ue["c"],VCheckbox:It["a"],VFileInput:Lt["a"],VForm:$t["a"],VTextField:w["a"],VTextarea:re["a"]});var Mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{key:"tasks-"+e.$store.state.lastSync},[e.isEditing?r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Update your board")]),r("v-card-text",{class:e.$theme.card.textSize},[r("board-form",{on:{updated:function(t){e.tasksByList=e.getTasksByList(),e.isEditing=!1}}})],1)],1):[r("v-row",{staticClass:"v-align"},[r("v-col",[r("h1",[e._v("Your board")])]),r("v-col",[r("v-btn",{staticClass:"float-right",attrs:{small:"",color:"secondary"},on:{click:function(t){e.isEditing=!0}}},[e._v("Edit...")])],1)],1),r("div",{staticClass:"board"},e._l(e.$store.getters["boardLists"],(function(t,n){return r("v-card",{key:n,class:["task-list mr-4",{collapsed:!e.lists[n].expanded},{expanded:e.lists[n].expanded}]},[r("v-card-title",{staticClass:"px-2 py-0 body-1"},[r("v-row",{staticClass:"py-3"},[r("v-col",{attrs:{cols:"10"}},[r("v-btn",{attrs:{"x-small":"",icon:""},on:{click:function(t){e.lists[n].expanded=!e.lists[n].expanded}}},[e.lists[n].expanded?r("v-icon",[e._v(e._s(e.$icons.mdiChevronDown))]):r("v-icon",[e._v(e._s(e.$icons.mdiChevronUp))])],1),e._v(" "+e._s(t.label)+" · "+e._s((e.tasksByList[n]||[]).length)+" ")],1),e.lists[n].expanded?r("v-col",{attrs:{cols:"2"}},[r("v-btn",{staticClass:"float-right",attrs:{fab:"",dark:"","x-small":"",color:"secondary"},on:{click:function(t){t.preventDefault(),e.lists[n].showForm=!e.lists[n].showForm}}},[r("v-icon",[e._v(e._s(e.$icons.mdiPlus))])],1)],1):e._e()],1)],1),r("v-divider"),e.lists[n].expanded?r("v-card-text",{staticClass:"py-2 px-2"},[e.lists[n].showForm?r("v-card",{attrs:{color:e.$theme.nestedCard.color}},[r("v-card-text",{staticClass:"pb-0 px-2 pt-1"},[r("v-form",{ref:"form"+n,refInFor:!0},[r("v-text-field",{attrs:{label:"Task",autofocus:"",required:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitTask(n)}},model:{value:e.newTaskText,callback:function(t){e.newTaskText=t},expression:"newTaskText"}}),r("v-select",{attrs:{items:e.$store.getters["taskCategoryChoices"],label:"Category"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitTask(n)}},model:{value:e.newTaskCategory,callback:function(t){e.newTaskCategory=t},expression:"newTaskCategory"}})],1)],1),r("v-card-actions",{staticClass:"py-0 px-2 mb-5"},[r("v-row",[r("v-col",[r("v-btn",{staticClass:"float-left",attrs:{text:""},on:{click:function(t){t.preventDefault(),e.lists[n].showForm=!1}}},[e._v(" Cancel ")])],1),r("v-col",[r("v-btn",{staticClass:"float-right",attrs:{color:"primary"},on:{click:function(t){return t.preventDefault(),e.submitTask(n)}}},[e._v(" Add ")])],1)],1)],1)],1):e._e(),r("draggable",{staticClass:"list-group",attrs:{group:{name:"tasks"}},on:{add:function(t){return e.moveCard(t.item.dataset.id,n)}},model:{value:e.tasksByList[n],callback:function(t){e.$set(e.tasksByList,n,t)},expression:"tasksByList[idx]"}},e._l(e.tasksByList[n],(function(t){return r("v-lazy",{key:"task-"+t._id+"-"+t._rev,attrs:{options:{threshold:.5},"data-id":t._id,"min-height":"50",transition:"fade-transition"}},[r("task-card",{staticClass:"mb-2",attrs:{task:t,"is-done":n===e.$store.getters["boardLists"].length-1},on:{done:function(t){return e.moveCard(t._id,e.$store.getters["boardLists"].length-1)},deleted:e.updateTasks,updated:e.updateTasks}})],1)})),1)],1):e._e()],1)})),1)]],2)},zt=[],At=r("c707"),Wt=r.n(At),Nt={props:{query:String},components:{BoardForm:function(){return r.e("tasks~31ecd969").then(r.bind(null,"a2fd"))},TaskCard:function(){return r.e("tasks~31ecd969").then(r.bind(null,"5e25"))},draggable:function(){return r.e("tasks~31ecd969").then(r.t.bind(null,"b76a",7))}},data:function(){return{isEditing:!1,lists:{0:{showForm:!1,expanded:!0},1:{showForm:!1,expanded:!0},2:{showForm:!1,expanded:!0},3:{showForm:!1,expanded:!0},4:{showForm:!1,expanded:!0},5:{showForm:!1,expanded:!0},6:{showForm:!1,expanded:!0},7:{showForm:!1,expanded:!0},8:{showForm:!1,expanded:!0},9:{showForm:!1,expanded:!0}},tasks:[],tasksByList:{},newTaskText:"",newTaskCategory:null}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["l"])(e.$store,e.query);case 2:e.tasks=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{getTasksByList:function(){var e=this,t={},r=-1;return this.$store.getters["boardLists"].forEach((function(){r+=1,t[r]=Wt()(e.tasks.filter((function(e){return e.list===r}),["_id"])),t[r].reverse()})),t},submitTask:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.newTaskText&&0!==t.newTaskText.length){r.next=2;break}return r.abrupt("return");case 2:return t.lists[e].showForm=!1,n=(new Date).toISOString(),a={type:"task",_id:n,date:n,index:-t.tasksByList[e].length,text:t.newTaskText,list:e,category:t.newTaskCategory},r.next=7,t.$store.state.db.put(a);case 7:o=r.sent,a._rev=o.rev,t.tasks.push(a),t.newTaskText=null,t.newTaskCategory=null;case 12:case"end":return r.stop()}}),r)})))()},updateTasks:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["l"])(e.$store,e.query);case 2:e.tasks=t.sent;case 3:case"end":return t.stop()}}),t)})))()},moveCard:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.$store.state.db.get(e);case 2:return a=n.sent,a.list=t,n.next=6,r.$store.state.db.put(a);case 6:if(t!==r.$store.getters["boardLists"].length-1){n.next=9;break}return n.next=9,r.updateTasks();case 9:case"end":return n.stop()}}),n)})))()}},watch:{query:{handler:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(E["l"])(this.$store,this.query);case 2:this.tasks=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),immediate:!0},tasks:{handler:function(){this.tasksByList=this.getTasksByList()},immediate:!0,deep:!0},"$store.settings.boardConfig":{handler:function(e){e&&(this.tasksByList=this.getTasksByList())},immediate:!0}}},Ht=Nt,Jt=r("b974"),Yt=Object(u["a"])(Ht,Mt,zt,!1,null,null,null),Qt=Yt.exports;d()(Yt,{VBtn:v["a"],VCard:ee["a"],VCardActions:ue["a"],VCardText:ue["b"],VCardTitle:ue["c"],VCol:Ct["a"],VDivider:Re["a"],VForm:$t["a"],VIcon:g["a"],VLazy:de["a"],VRow:Ot["a"],VSelect:Jt["a"],VTextField:w["a"]}),n["a"].use(B["a"]);var Kt=[{path:"/diary",component:Ge,props:function(e){return{query:e.query.q}},children:[{path:"",name:"Timeline",component:Be},{path:"visualization",name:"Visualization",component:Ae},{path:"calendar",name:"Calendar",component:lt}]},{path:"/about",name:"About",component:gt},{path:"/tasks",component:Qt,props:function(e){return{query:e.query.q}}},{path:"/settings",name:"Settings",component:Ut}],Gt=new B["a"]({routes:Kt}),Xt=Gt,Zt=r("f309");n["a"].use(Zt["a"]);var er=new Zt["a"]({icons:{iconfont:"mdiSvg"},theme:{options:{customProperties:!0},dark:!0,themes:{light:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}),tr=r("94ed");n["a"].config.productionTip=!1,n["a"].prototype.$icons={mdiBook:tr["a"],mdiCalendar:tr["b"],mdiClock:tr["i"],mdiClockOutline:tr["j"],mdiContentCopy:tr["m"],mdiCog:tr["l"],mdiClose:tr["k"],mdiChartTimelineVariant:tr["c"],mdiFormatListBulleted:tr["t"],mdiDownload:tr["q"],mdiSync:tr["A"],mdiPencil:tr["x"],mdiCheck:tr["d"],mdiMagnify:tr["v"],mdiEye:tr["r"],mdiEyeOff:tr["s"],mdiDotsHorizontal:tr["p"],mdiDelete:tr["n"],mdiDeleteOutline:tr["o"],mdiSend:tr["z"],mdiMenuDown:tr["w"],mdiChevronUp:tr["h"],mdiChevronDown:tr["e"],mdiChevronRight:tr["g"],mdiChevronLeft:tr["f"],mdiPlus:tr["y"],mdiHelpCircleOutline:tr["u"]},n["a"].prototype.$theme={appBar:{color:"pink darken-4"},card:{color:"grey darken-4",textSize:"body-1"},nestedCard:{color:"blue-grey darken-4",textSize:"body-2"},drawer:{color:"grey darken-4"},menu:{color:"grey darken-4"},switch:{color:"pink"},input:{color:"grey darken-4"},mainButton:{color:"pink darken-4"}},new n["a"]({router:Xt,store:F,render:function(e){return e(_)},vuetify:er,beforeCreate:function(){window.document.getElementById("app-shell").remove(),this.$store.commit("loadCachedState"),this.$store.commit("initDb"),this.$store.dispatch("setupSync",{url:this.$store.state.couchDbUrl,username:this.$store.state.couchDbUsername,password:this.$store.state.couchDbPassword})}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),a=r.n(n);a.a},"5f09":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("v-card",[r("v-toolbar",{attrs:{color:e.$theme.appBar.color}},[r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$emit("update:show",!1)}}},[r("v-icon",[e._v(e._s(e.$icons.mdiClose))])],1),r("v-spacer"),e.config?r("v-toolbar-title",[e._v("Update chart")]):r("v-toolbar-title",[e._v("Add a new chart")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{text:""},on:{click:e.submit}},[e._v("Save")])],1)],1),r("v-divider"),r("v-container",{staticClass:"mt-4"},[r("h1",[e._v("Chart configuration")]),r("v-form",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Chart name"},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Data query"},model:{value:e.field,callback:function(t){e.field=t},expression:"field"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-select",{attrs:{items:[{text:"Entries",value:"entries"},{text:"Tags",value:"tags"}],label:"Data source",required:""},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-select",{attrs:{items:e.chartTypes,label:"Visualization",required:""},model:{value:e.chartType,callback:function(t){e.chartType=t},expression:"chartType"}})],1)],1)],1)],1),r("v-divider"),r("v-container",{staticClass:"mt-4"},[r("h1",[e._v("Preview")]),r("chart-component",{key:e.previewKey,attrs:{config:e.chartConfig,tags:e.tags,entries:e.entries,builtin:!1},on:{"query:updated":function(t){e.query=t,e.field=null}}})],1)],1)],1)},a=[],o=(r("a9e3"),r("d3b7"),r("96cf"),r("1da1")),s=r("5530"),i=r("025e"),c={props:{entries:{type:Array},tags:{type:Array},show:{type:Boolean,default:!1},config:{type:Object,default:null},days:{type:Number,default:null}},components:{ChartComponent:function(){return r.e("visualization~31ecd969").then(r.bind(null,"6de0"))}},data:function(){return{field:"sum(mood) as Mood",defaultConfig:this.config,chartTypes:i["a"],label:(this.config||{}).label||"Mood by day",query:(this.config||{}).query||"SELECT date, sum(mood) as Mood FROM ? GROUP BY date ORDER BY date DESC",chartType:(this.config||{}).chartType||"line",source:(this.config||{}).source||"entries"}},computed:{chartConfig:function(){var e=this.config||{};return Object(s["a"])({},e,{},{label:this.label,query:this.query,chartType:this.chartType,source:this.source})},previewKey:function(){return JSON.stringify(this.chartConfig)}},methods:{setQuery:function(){this.field&&this.field.length>0&&(this.query="SELECT date, ".concat(this.field," FROM ? GROUP BY date ORDER BY date DESC"))},submit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.config){t.next=5;break}return t.next=3,e.update();case 3:t.next=7;break;case 5:return t.next=7,e.addNew();case 7:e.$emit("update:show",!1);case 8:case"end":return t.stop()}}),t)})))()},addNew:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("addChart",e.chartConfig);case 2:r=t.sent,e.$emit("created",r);case 4:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("updateChart",e.chartConfig);case 2:r=t.sent,e.$emit("updated",r);case 4:case"end":return t.stop()}}),t)})))()}},watch:{field:{handler:function(){this.setQuery()},immediate:!0}}},u=c,l=r("2877"),d=r("6544"),p=r.n(d),h=r("8336"),f=r("b0af"),v=r("62ad"),m=r("a523"),g=r("169a"),b=r("ce7e"),y=r("4bd4"),w=r("132d"),x=r("0fd9"),k=r("b974"),_=r("2fa4"),C=r("8654"),$=r("71d9"),O=r("2a7f"),D=Object(l["a"])(u,n,a,!1,null,null,null);t["default"]=D.exports;p()(D,{VBtn:h["a"],VCard:f["a"],VCol:v["a"],VContainer:m["a"],VDialog:g["a"],VDivider:b["a"],VForm:y["a"],VIcon:w["a"],VRow:x["a"],VSelect:k["a"],VSpacer:_["a"],VTextField:C["a"],VToolbar:$["a"],VToolbarItems:O["a"],VToolbarTitle:O["b"]})},"9c0c":function(e,t,r){}});