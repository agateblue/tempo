(function(e){function t(t){for(var r,a,o=t[0],s=t[1],u=t[2],l=0,d=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==c[o]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={"app~748942c6":0},c={"app~748942c6":0},i=[];function o(e){return s.p+"js/"+({"About~31ecd969":"About~31ecd969","DiaryCalendar~DiaryTimeline~31ecd969":"DiaryCalendar~DiaryTimeline~31ecd969","DiaryCalendar~31ecd969":"DiaryCalendar~31ecd969","DiaryTimeline~31ecd969":"DiaryTimeline~31ecd969","DiaryVisualization~31ecd969":"DiaryVisualization~31ecd969","Diary~31ecd969":"Diary~31ecd969","Settings~31ecd969":"Settings~31ecd969","Tasks~31ecd969":"Tasks~31ecd969","visualization~31ecd969":"visualization~31ecd969","tasks~31ecd969":"tasks~31ecd969","alasql~2a42e354":"alasql~2a42e354"}[e]||e)+"."+{"About~31ecd969":"01a5aeb0","DiaryCalendar~DiaryTimeline~31ecd969":"df6c88af","DiaryCalendar~31ecd969":"fa6be5ce","DiaryTimeline~31ecd969":"c237256a","DiaryVisualization~31ecd969":"bc618230","Diary~31ecd969":"1e2e9263","Settings~31ecd969":"69f40af1","Tasks~31ecd969":"2a18e57a","chunk-2d0b3a5b":"4b92ba8c","chunk-2d0e1bc2":"86a4c6b0","chunk-2d2268de":"0d91de7a","visualization~31ecd969":"38ec4ae4","tasks~31ecd969":"19912ff7","alasql~2a42e354":"2bfb585d"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"About~31ecd969":1,"DiaryCalendar~DiaryTimeline~31ecd969":1,"DiaryCalendar~31ecd969":1,"DiaryTimeline~31ecd969":1,"DiaryVisualization~31ecd969":1,"Diary~31ecd969":1,"Settings~31ecd969":1,"Tasks~31ecd969":1,"visualization~31ecd969":1,"tasks~31ecd969":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({"About~31ecd969":"About~31ecd969","DiaryCalendar~DiaryTimeline~31ecd969":"DiaryCalendar~DiaryTimeline~31ecd969","DiaryCalendar~31ecd969":"DiaryCalendar~31ecd969","DiaryTimeline~31ecd969":"DiaryTimeline~31ecd969","DiaryVisualization~31ecd969":"DiaryVisualization~31ecd969","Diary~31ecd969":"Diary~31ecd969","Settings~31ecd969":"Settings~31ecd969","Tasks~31ecd969":"Tasks~31ecd969","visualization~31ecd969":"visualization~31ecd969","tasks~31ecd969":"tasks~31ecd969","alasql~2a42e354":"alasql~2a42e354"}[e]||e)+"."+{"About~31ecd969":"e83f01a4","DiaryCalendar~DiaryTimeline~31ecd969":"fd378f7e","DiaryCalendar~31ecd969":"71678e08","DiaryTimeline~31ecd969":"e86be5c9","DiaryVisualization~31ecd969":"c89ac615","Diary~31ecd969":"c67975b2","Settings~31ecd969":"db781c55","Tasks~31ecd969":"299a13c7","chunk-2d0b3a5b":"31d6cfe0","chunk-2d0e1bc2":"31d6cfe0","chunk-2d2268de":"31d6cfe0","visualization~31ecd969":"f7eef330","tasks~31ecd969":"f921b4fd","alasql~2a42e354":"31d6cfe0"}[e]+".css",c=s.p+r,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var u=i[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===c))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===r||l===c)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||c,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=c;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var r=c[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=c[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=o(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=c[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}c[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;i.push([0,"chunk-vendors~253ae210","chunk-vendors~2ebc07f6","chunk-vendors~7d359b94","chunk-vendors~cfbf0a2e","chunk-vendors~fdc6512a"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"025e":function(e,t,n){"use strict";n.d(t,"o",(function(){return h})),n.d(t,"g",(function(){return b})),n.d(t,"f",(function(){return k})),n.d(t,"i",(function(){return O})),n.d(t,"j",(function(){return x})),n.d(t,"h",(function(){return D})),n.d(t,"a",(function(){return S})),n.d(t,"p",(function(){return E})),n.d(t,"n",(function(){return A})),n.d(t,"k",(function(){return U})),n.d(t,"l",(function(){return q})),n.d(t,"d",(function(){return N})),n.d(t,"b",(function(){return z})),n.d(t,"c",(function(){return I})),n.d(t,"m",(function(){return F})),n.d(t,"e",(function(){return M})),n.d(t,"q",(function(){return Q}));var r=n("2909"),a=n("c7eb"),c=n("1da1"),i=n("5530"),o=n("b85c"),s=n("53ca"),u=(n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("25f0"),n("5319"),n("14d9"),n("99af"),n("d3b7"),n("159b"),n("d81d"),n("4de4"),n("498a"),n("b64b"),n("2ca0"),n("1276"),n("fb6a"),n("466d"),n("caad"),n("2532"),n("ddb0"),n("a15b"),n("4e82"),n("b0c0"),n("3ca3"),n("2b3d"),n("9861"),n("5db7"),n("73d9"),n("7db0"),n("a026")),l={"+":1,"-":-1,"~":0,"?":null,"#":null,"!":null,"@":null},d={"+":"feeling","-":"feeling","~":"feeling","?":"feeling","#":"tag","@":"annotation"},f=/(^|\s)((#|\+{1,5}|-{1,5}|~|\?|!|@)([:A-zÀ-ÿ\d-]+(=(true|false|[:A-zÀ-ÿ\d-]+|".*")?(-?\d*(\.(\d+))?)?)?))/gi;function p(e){var t=[],n=new RegExp(f),r=n.exec(e);while(null!=r){var a={text:r[2],sign:r[3][0],id:r[4].replace(/"/g,"")},c=!0;if(a.type=d[a.sign],"annotation"===a.type){var i=a.id.replace(/"/g,"").split("=");a.id=i[0],a.value=i[1]||null}a.mood=l[a.sign],a.mood&&(a.mood=a.mood*r[3].length),c&&t.push(a),r=n.exec(e)}return t}function h(e){try{return e.replace(f,(function(e,t,n,r,a){return" [".concat(n,"](/?q=tag:").concat(encodeURIComponent(a),'){.internal-link data-query="tag:').concat(a.split("=")[0],'"}')}))}catch(t){return""}}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={text:e,tags:p(e),mood:0,type:"entry",data:null,favorite:!1,thread:t.thread||null,replies:t.replies||[],form:null},r=[];return n.tags.forEach((function(e){null!=e.mood&&void 0!=e.mood&&(n.mood+=e.mood),"annotation"===e.type&&e.value&&r.push([e.id,e.value])})),r.length>0&&(n.data={},r.forEach((function(e){n.data[e[0]]=e[1]}))),n}function m(e){return e?e.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})).map((function(e){return g(e)})):[]}function g(e){var t=[];if(!e)return[];var n=e.split(" ");return n.forEach((function(e){var n=e.trim();n&&(Object.keys(l).indexOf(n[0])>-1?1===n.length?t.push({sign:n[0]}):t.push({tag:n}):n.startsWith("d:")||n.startsWith("date:")?t.push({date:n.split(":")[1]}):n.startsWith("is:fav")?t.push({favorite:!0}):n.startsWith("is:thread")?t.push({thread:!0}):n.startsWith("is:reply")?t.push({reply:!0}):n.startsWith("t:")||n.startsWith("tag:")?t.push({tagName:n.split(/:(.+)/)[1]}):n.startsWith("c:")||n.startsWith("category:")?t.push({categoryName:n.split(/:(.+)/)[1]}):n.startsWith("$")?t.push({alias:n.slice(1)}):t.push({text:n}))})),t}function v(e,t){if(!e)return!1;var n=new RegExp(e,"i");return t.match(n)||!1}function y(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(r){var a=t[r];if(a.alias&&n[a.alias]){var c=w(e,m(n[a.alias]));if(!c)return{v:!1}}if(a.text&&!e.text.toLowerCase().includes(a.text.toLowerCase()))return{v:v(a.text,e.text)};if(a.tag){var i=e.tags.filter((function(e){return v(a.tag.text,e.text)}));if(0===i.length)return{v:!1}}if(a.favorite&&!e.favorite)return{v:!1};if(a.thread&&0===(e.replies||[]).length)return{v:!1};if(a.reply&&!e.thread)return{v:!1};if(a.tagName){var o=e.tags.filter((function(e){return v(a.tagName,e.id)}));if(0===o.length)return{v:!1}}if(a.categoryName)return{v:v(a.categoryName,e.category)};if(a.sign){var s=e.tags.filter((function(e){return e.sign===a.sign}));if(0===s.length)return{v:!1}}return a.date&&!e._id.startsWith(a.date)?{v:!1}:void 0},a=0;a<t.length;a++){var c=r(a);if("object"===Object(s["a"])(c))return c.v}return!0}function w(e,t,n){var r,a=Object(o["a"])(t);try{for(a.s();!(r=a.n()).done;){var c=r.value;if(y(e,c,n))return!0}}catch(i){a.e(i)}finally{a.f()}return!1}function k(e){var t=new Date(e.date),n=j(t),r=t.getFullYear(),a={text:e.text,_id:e._id,_rev:e._rev,mood:e.mood,fullDate:t,date:t.toISOString().split("T")[0],year:r,month:t.getMonth()+1,day:t.getDate(),weekday:t.getDay()+1,weeknumber:n,week:"".concat(r,"-").concat(n),tags:{},data:e.data||null,favorite:e.favorite||!1,thread:e.thread||null,replies:e.replies||[],form:e.form};return e.tags.forEach((function(e){a.tags[e.id]=Object(i["a"])(Object(i["a"])({},e),{},{present:!0})})),a.data&&Object.keys(a.data).forEach((function(t){if(a.data[t])try{a.data[t]=JSON.parse(a.data[t])}catch(e){}})),a}function O(e,t,n){return t=new Date(t).getTime(),n=new Date(n).getTime()+864e5,e.filter((function(e){var r=new Date(e.date).getTime();return r>=t&&r<n})).map((function(e){return k(e)}))}function x(e){var t={};return e.forEach((function(e){Object.keys(e.tags).forEach((function(n){var r=t[n]||{id:n,entries:0,mood:0};r.entries+=1,r.mood+=e.mood,t[n]=r}))})),Object.keys(t).map((function(e){return t[e]}))}function j(e){e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));var t=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-t);var n=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-n)/864e5+1)/7)}function D(e){return e.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hourCycle:"h23"})}var S=[{value:"line",text:"Plot line"},{value:"pie",text:"Pie chart"},{value:"percentage",text:"Percentage bar"},{value:"table",text:"Table"},{value:"json",text:"JSON"}];function C(e,t){return _.apply(this,arguments)}function _(){return _=Object(c["a"])(Object(a["a"])().mark((function e(t,n){var r,c,i;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.time("getEntries"),r={include_docs:!0,descending:n},e.next=4,t.state.db.allDocs(r);case 4:return c=e.sent,i=c.rows.flatMap((function(e){return"entry"===e.doc.type?[e.doc]:[]})),console.timeEnd("getEntries"),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function T(e,t,n){if(0===t.length)return e;var r={};return n.forEach((function(e){r[e.name]=e.query})),e.filter((function(e){return w(e,t,r)}))}function E(e){return P.apply(this,arguments)}function P(){return P=Object(c["a"])(Object(a["a"])().mark((function e(t){var n,r,c,i;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.store,r=t.sortDesc,c=t.query,e.next=3,C(n,r);case 3:return i=e.sent,e.abrupt("return",T(i,m(c),n.state.settings.aliases));case 5:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function $(e,t){return 0===t.length?e:e.filter((function(e){return w(e,t)}))}function A(e,t){return B.apply(this,arguments)}function B(){return B=Object(c["a"])(Object(a["a"])().mark((function e(t,n){var r,c;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.state.db.find({selector:{type:"task",date:{$gt:0}}});case 2:return r=e.sent,c=r.docs,e.abrupt("return",$(c,m(n)));case 5:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function U(e){var t=["_rev","_id","_","type"];for(var n in e)if(Object.hasOwnProperty.call(e,n)&&-1===t.indexOf(n))return e[n]}function q(e){return L.apply(this,arguments)}function L(){return L=Object(c["a"])(Object(a["a"])().mark((function e(t){var n,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.state.db.find({selector:{type:"settings"}});case 2:return n=e.sent,r=n.docs.map((function(e){return{_id:e._id,_rev:e._rev,value:e.value||U(e)}})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function N(e,t,n,r,a){var c=W(e,n,r),i=t.createElement("a");i.setAttribute("download",a),i.href=c,t.body.appendChild(i),e.requestAnimationFrame((function(){var e=new MouseEvent("click");i.dispatchEvent(e),t.body.removeChild(i)}))}function W(e,t,n){var r=new Blob([t],{type:n}),a=e.URL.createObjectURL(r);return a}var z=[{name:"telemetry",default:function(){return!0}},{name:"webhook",default:function(){return{}}},{name:"charts",default:function(){return[]}},{name:"aliases",default:function(){return[]}},{name:"boardConfig",default:function(){return{lists:[{label:"To-do"},{label:"Doing"}],categories:[{label:"Personal"},{label:"Work"},{label:"House-keeping"}]}}},{name:"blueprints",default:function(){return["builtin:mood","builtin:tags"]}}];function I(e,t){return H.apply(this,arguments)}function H(){return H=Object(c["a"])(Object(a["a"])().mark((function e(t,n){var c,s,u,l,d,f,p;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=[],s=[],e.next=4,n.compact();case 4:u=Object(o["a"])(t),e.prev=5,u.s();case 7:if((l=u.n()).done){e.next=21;break}return d=l.value,e.prev=9,e.next=12,n.get(d._id);case 12:f=e.sent,c.push(Object(i["a"])(Object(i["a"])({},d),{},{_rev:f._rev})),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](9),s.push(Object(i["a"])({},d));case 19:e.next=7;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e["catch"](5),u.e(e.t1);case 26:return e.prev=26,u.f(),e.finish(26);case 29:return e.t2=[],e.t3=r["a"],e.next=33,n.bulkDocs(s,{new_edits:!1});case 33:return e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t6=r["a"],e.next=38,n.bulkDocs(c);case 38:return e.t7=e.sent,e.t8=(0,e.t6)(e.t7),p=e.t2.concat.call(e.t2,e.t5,e.t8),e.abrupt("return",p);case 42:case"end":return e.stop()}}),e,null,[[5,23,26,29],[9,16]])}))),H.apply(this,arguments)}function F(e){return e.slice(0,19)}function M(e,t){return t=t.split("?")[0],"".concat(e.protocol,"//").concat(e.hostname).concat(t)}function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(console.debug("[telemetry] tracking",t),e.getters["settings"].telemetry)try{u["a"].$plausible.trackEvent(t,{props:n,callback:function(){console.debug("[telemetry] sent")}},Object(i["a"])({url:M(window.location,window.location.href.split("#")[1]),referrer:null},r))}catch(a){console.warn("Could not track event",a)}else console.debug("[telemetry] skipping, disabled by user")}},"098d":function(e,t,n){"use strict";n("60fa")},1:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("a026"),a=n("7496"),c=n("40dc"),i=n("b81c"),o=n("8336"),s=n("a523"),u=n("132d"),l=n("f6c4"),d=n("2fa4"),f=n("8654"),p=n("2a7f"),h=(n("14d9"),n("b0c0"),function(){var e=this,t=e._self._c;return t(a["a"],{attrs:{id:"tempo",dark:""}},[t(c["a"],{attrs:{app:"",dense:"",color:e.$theme.appBar.color}},[t(d["a"]),t(d["a"]),t(p["b"],{staticClass:"mr-4",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$router.push("/")}}},[e._v(" Tempo ")]),t(d["a"]),t(f["a"],{ref:"search",staticClass:"search",attrs:{dense:"",solo:"","hide-details":"",clearable:"",placeholder:"Search","append-icon":e.$icons.mdiMagnify},on:{"click:append":function(t){e.expandSearch=!0,e.$store.commit("searchQuery",e.searchQuery)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$store.commit("searchQuery",e.searchQuery)},"click:clear":function(t){return e.$store.commit("searchQuery","")}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),t(o["a"],{staticClass:"ml-3",attrs:{small:"",icon:"",to:"/about"}},[t(u["a"],{domProps:{textContent:e._s(e.$icons.mdiHelpCircleOutline)}})],1),t(d["a"]),t(d["a"])],1),t(l["a"],[t(s["a"],{staticStyle:{"padding-bottom":"64px"},attrs:{fluid:"",tag:"main"}},[t("router-view",{ref:"view"})],1)],1),t(i["a"],{attrs:{fixed:""}},[t(d["a"]),e.$store.state.couchDbUrl?t(o["a"],{style:e.bottomNavBarButtonStyle,attrs:{loading:e.$store.state.sync.loading},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.$store.dispatch("forceSync",{updateLastSync:!0})}},scopedSlots:e._u([{key:"loader",fn:function(){return[t("span",[e._v("Syncing…")])]},proxy:!0}],null,!1,64789910)},[!e.$store.state.sync.loading&&e.$store.state.sync.error?t("span",[e._v(" Sync error: "),e.$store.state.sync.error.name?t("span",[e._v(e._s(e.$store.state.sync.error.name))]):t("span",[e._v("Unknown")])]):t("span",[e._v(" Sync ")]),t(u["a"],{domProps:{textContent:e._s(e.$icons.mdiSync)}})],1):e._e(),t(o["a"],{style:e.bottomNavBarButtonStyle,attrs:{to:"/diary"}},[t("span",[e._v("Diary")]),t(u["a"],{domProps:{textContent:e._s(e.$icons.mdiBook)}})],1),t(o["a"],{style:e.bottomNavBarButtonStyle,attrs:{to:"/tasks"}},[t("span",[e._v("Tasks")]),t(u["a"],{domProps:{textContent:e._s(e.$icons.mdiCheck)}})],1),t(o["a"],{style:e.bottomNavBarButtonStyle,attrs:{to:"/settings"}},[t("span",[e._v("Settings")]),t(u["a"],{domProps:{textContent:e._s(e.$icons.mdiCog)}})],1),t(d["a"])],1)],1)}),b=[],m=n("c7eb"),g=n("1da1"),v={data:function(){return{drawer:null,searchQuery:this.$route.query.q||"",exportDialog:!1}},created:function(){var e=this;return Object(g["a"])(Object(m["a"])().mark((function t(){return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("loadSettings"),navigator.serviceWorker&&navigator.serviceWorker.addEventListener("controllerchange",(function(){e.$store.state.serviceWorker.refreshing||(e.$store.commit("serviceWorker",{refreshing:!0}),window.location.reload())}));case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;window.onclick=function(t){var n="internal-link";"a"==t.target.localName&&t.target.classList.contains(n)&&(t.preventDefault(),e.$store.commit("searchQuery",t.target.getAttribute("data-query")))}},computed:{bottomNavBarButtonStyle:function(){return"height: 56px; background: transparent;"}},methods:{updateApp:function(){this.$store.commit("serviceWorker",{updateAvailable:!1}),this.$store.state.serviceWorker.registration&&this.$store.state.serviceWorker.registration.waiting&&this.$store.state.serviceWorker.registration.waiting.postMessage({command:"skipWaiting"})},scrollToTop:function(){window.scrollTo(0,0)}},watch:{"$route.path":{handler:function(e){"/"===e&&this.$router.push("/diary")},immediate:!0},"$store.state.searchQuery":{handler:function(e){this.searchQuery=e,this.$router.push({path:this.$route.path,query:{q:e}})}}}},y=v,w=(n("098d"),n("2877")),k=Object(w["a"])(y,h,b,!1,null,null,null),O=k.exports,x=n("9483"),j=n("b85c"),D=n("2909"),S=n("5530"),C=(n("d3b7"),n("159b"),n("99af"),n("d81d"),n("4de4"),n("ddb0"),n("7db0"),n("4e82"),n("e9c4"),n("b64b"),n("3ca3"),n("2f62")),_=n("16b2"),T=n("5d16"),E=n("fcd3"),P=n("025e");function $(){return A.apply(this,arguments)}function A(){return A=Object(g["a"])(Object(m["a"])().mark((function e(){return Object(m["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.e("chunk-2d0b3a5b").then(n.t.bind(null,"28ed",3));case 2:return e.t0=e.sent.default,e.next=5,n.e("chunk-2d2268de").then(n.t.bind(null,"e8c8",3));case 5:return e.t1=e.sent.default,e.next=8,n.e("chunk-2d0e1bc2").then(n.t.bind(null,"7c66",3));case 8:return e.t2=e.sent.default,e.abrupt("return",{"builtin:mood":e.t0,"builtin:tags":e.t1,"builtin:travel":e.t2});case 10:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}_["a"].plugin(T["a"]),_["a"].plugin(E["a"]),r["a"].use(C["a"]);var B=1,U=new C["a"].Store({state:{db:null,pageSize:30,syncHandler:null,couchDbUrl:null,couchDbUsername:null,couchDbPassword:null,lastSync:new Date,version:B,dark:!0,sync:{loading:!1,error:null},charts:[],aliases:[],serviceWorker:{refreshing:!1,registration:null,updateAvailable:!1},settings:{},loadedBlueprints:[],searchQuery:""},mutations:{handleSync:function(e,t){var n=t.updateLastSync;console.log("Received sync event"),n&&(e.lastSync=new Date)},syncHandler:function(e,t){e.syncHandler&&(console.log("Killing existing replication…"),e.syncHandler.cancel()),e.syncHandler=t},couchDbConfig:function(e,t){var n=t.url,r=t.username,a=t.password;e.couchDbUrl=n,e.couchDbUsername=r,e.couchDbPassword=a},loadCachedState:function(e){if(localStorage.getItem("state")){var t=JSON.parse(localStorage.getItem("state"));t.version==B?(console.log("Loading cached state…"),this.replaceState(Object.assign(e,t))):(console.log("Ignoring stale cache"),e.version=B)}},initDb:function(e){e.syncHandler&&(console.log("Killing existing replication…"),e.syncHandler.cancel()),e.db=new _["a"]("db"),e.db.createIndex({index:{fields:["date","type","thread"]}}),e.db.createIndex({index:{fields:["form","date"]}})},serviceWorker:function(e,t){e.serviceWorker=Object(S["a"])(Object(S["a"])({},e.serviceWorker),t)},setting:function(e,t){var n=t.name,r=t.value;e.settings[n]=r},settings:function(e,t){e.settings=t},sync:function(e,t){e.sync=t},loadedBlueprints:function(e,t){e.loadedBlueprints=t},searchQuery:function(e,t){e.searchQuery=t}},getters:{settings:function(e){var t={};return P["b"].forEach((function(n){var r=e.settings[n.name];void 0===r&&(r=n.default()),t[n.name]=r})),t},boardLists:function(e,t){return[].concat(Object(D["a"])(t.settings.boardConfig.lists),[{label:"Done"}])},taskCategoryChoices:function(e){return e.settings.boardConfig.categories.map((function(e){return{value:e.label,text:e.label}}))},taskListChoices:function(e){var t=0,n=[];return e.settings.boardConfig.lists.forEach((function(e){n.push({value:t,text:e.label}),t+=1})),n.push({value:t,text:"Done"}),n},enabledBlueprints:function(e){return e.loadedBlueprints.filter((function(t){return e.settings.blueprints.indexOf(t.id)>-1}))},forms:function(e,t){var n=[];return t.enabledBlueprints.forEach((function(e){n=[].concat(Object(D["a"])(n),Object(D["a"])(e.forms||[]))})),n},formsById:function(e,t){var n={};return t.forms.forEach((function(e){n[e.id]=e})),n},fields:function(e,t){var n=[];return t.enabledBlueprints.forEach((function(e){n=[].concat(Object(D["a"])(n),Object(D["a"])(e.fields||[]))})),n},fieldsById:function(e,t){var n={};return t.fields.forEach((function(e){n[e.id]=e})),n}},actions:{addEntry:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,n.next=3,r.db.put(t);case 3:return n.next=5,r.db.get(t._id);case 5:return c=n.sent,n.next=8,a("rebuildThread",t.thread);case 8:return a("forceSync",{updateLastSync:!1}),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n)})))()},partialUpdateEntry:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c,i,o;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,a=t.entry,c=t.values,i=Object(S["a"])(Object(S["a"])(Object(S["a"])({},Object(P["g"])(a.text,{thread:a.thread,replies:a.replies})),c),{},{_rev:a._rev,_id:a._id,date:new Date(a.date).toISOString()}),n.next=5,r("updateEntry",i);case 5:return o=n.sent,r("forceSync",{updateLastSync:!1}),n.abrupt("return",o);case 8:case"end":return n.stop()}}),n)})))()},updateEntry:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,n.next=3,r.db.put(t);case 3:return n.next=5,a("rebuildThread",t.thread);case 5:return n.next=7,r.db.get(t._id);case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}}),n)})))()},rebuildThread:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c,i;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,a=e.dispatch,t){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,r.db.get(t);case 6:c=n.sent,n.next=13;break;case 9:return n.prev=9,n.t0=n["catch"](3),console.error("Thread ".concat(t," does not exist and cannot be rebuilt"),n.t0),n.abrupt("return");case 13:return n.next=15,r.db.find({selector:{thread:c._id},fields:["_id"],limit:9999999});case 15:return i=n.sent,i=i.docs.map((function(e){return e._id})),i.sort(),c.replies=i,n.next=21,a("updateEntry",c);case 21:return n.abrupt("return",n.sent);case 22:case"end":return n.stop()}}),n,null,[[3,9]])})))()},deleteThread:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,t){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,r.db.find({selector:{thread:t},fields:["_id","_rev"],limit:9999999});case 5:return a=n.sent,a=a.docs.map((function(e){return Object(S["a"])(Object(S["a"])({},e),{},{_deleted:!0})})),console.log("Deleting ".concat(a.length," from thread ").concat(t,"...")),n.next=10,r.db.bulkDocs(a);case 10:return n.abrupt("return",a);case 11:case"end":return n.stop()}}),n)})))()},reset:function(e){return Object(g["a"])(Object(m["a"])().mark((function t(){var n,r,a;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,a=e.dispatch,t.next=3,r.db.destroy();case 3:return localStorage.removeItem("state"),n("settings",{}),n("initDb"),t.next=8,a("setupSync",{url:r.couchDbUrl,username:r.couchDbUsername,password:r.couchDbPassword});case 8:return t.next=10,a("loadSettings");case 10:case"end":return t.stop()}}),t)})))()},setupSync:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c,i,o,s,u;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,a=e.commit,c=t.url,i=t.username,o=t.password,a("syncHandler",null),a("couchDbConfig",{url:c,username:i,password:o}),!r.couchDbUrl){n.next=12;break}return console.log("Setting up live replication…"),s=new _["a"](r.couchDbUrl),console.log("Logging in…"),n.next=10,s.logIn(i,o);case 10:u=r.db.sync(s,{live:!0,retry:!0}).on("change",(function(){console.log("Sync change…")})).on("active",(function(){console.log("Sync active…")})).on("complete",(function(){console.log("Sync complete…")})),a("syncHandler",u);case 12:case"end":return n.stop()}}),n)})))()},forceSync:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c,i;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,a=e.commit,c=t.updateLastSync,r.couchDbUrl&&!r.sync.loading){n.next=4;break}return n.abrupt("return");case 4:return a("sync",{loading:!0,error:null}),console.log("Forcing sync…"),i=new _["a"](r.couchDbUrl),n.prev=7,n.next=10,i.logIn(r.couchDbUsername,r.couchDbPassword);case 10:return n.next=12,r.db.sync(i);case 12:n.next=19;break;case 14:return n.prev=14,n.t0=n["catch"](7),console.log("Error while syncing",n.t0),setTimeout((function(){a("sync",{loading:!1,error:null})}),3e3),n.abrupt("return",a("sync",{loading:!1,error:n.t0}));case 19:a("sync",{loading:!1,error:null}),a("handleSync",{updateLastSync:c});case 21:case"end":return n.stop()}}),n,null,[[7,14]])})))()},setWebhook:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,a=t.url,n.next=4,r("setSetting",{name:"webhook",value:{url:a}});case 4:case"end":return n.stop()}}),n)})))()},triggerWebhook:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,t=t||r.settings.webhook.url,t){n.next=5;break}return console.log("No webhook configured, skipping",r.settings.webhook.url),n.abrupt("return");case 5:return console.log("Sending webhook to",t),n.next=8,fetch(t,{method:"POST",body:""});case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}}),n)})))()},addChart:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c,i;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,c=(new Date).toISOString(),t._id=c,i=[].concat(Object(D["a"])(r.settings.charts),[t]),n.next=6,a("setSetting",{name:"charts",value:i});case 6:case"end":return n.stop()}}),n)})))()},removeChart:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,c=r.settings.charts.filter((function(e){return e._id!=t})),n.next=4,a("setSetting",{name:"charts",value:c});case 4:case"end":return n.stop()}}),n)})))()},updateChart:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,c=[],r.settings.charts.forEach((function(e){e._id===t._id?c.push(t):c.push(e)})),n.next=5,a("setSetting",{name:"charts",value:c});case 5:case"end":return n.stop()}}),n)})))()},boardConfig:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.next=3,r("setSetting",{name:"boardConfig",value:t});case 3:case"end":return n.stop()}}),n)})))()},addAlias:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c,i;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,c=(new Date).toISOString(),t._id=c,i=[].concat(Object(D["a"])(r.settings.aliases),[t]),n.next=6,a("setSetting",{name:"aliases",value:i});case 6:case"end":return n.stop()}}),n)})))()},removeAlias:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,c=r.settings.aliases.filter((function(e){return e._id!=t})),n.next=4,a("setSetting",{name:"aliases",value:c});case 4:case"end":return n.stop()}}),n)})))()},updateAlias:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,c=[],r.settings.aliases.forEach((function(e){e._id===t._id?c.push(t):c.push(e)})),n.next=5,a("setSetting",{name:"aliases",value:c});case 5:case"end":return n.stop()}}),n)})))()},setSetting:function(e,t){return Object(g["a"])(Object(m["a"])().mark((function n(){var r,a,c,i,o;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.commit,c=t.name,i=t.value,n.prev=2,n.next=5,r.db.get(c);case 5:o=n.sent,o={_id:c,type:"settings",_rev:o._rev,value:i},n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](2),o={_id:c,type:"settings",value:i};case 12:return o=JSON.parse(JSON.stringify(o)),n.next=15,r.db.put(o);case 15:a("setting",{name:c,value:i});case 16:case"end":return n.stop()}}),n,null,[[2,9]])})))()},loadSettings:function(e){return Object(g["a"])(Object(m["a"])().mark((function t(){var n,r,a,c,i,o,s,u,l;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.state,r=e.commit,a=e.dispatch,c={},i=Object(j["a"])(P["b"]),t.prev=3,i.s();case 5:if((o=i.n()).done){t.next=21;break}return s=o.value,u=void 0,t.prev=8,t.next=11,n.db.get(s.name);case 11:l=t.sent,u=Object(P["k"])(l),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](8),u=s.default();case 18:c[s.name]=u;case 19:t.next=5;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t["catch"](3),i.e(t.t1);case 26:return t.prev=26,i.f(),t.finish(26);case 29:r("settings",c),a("loadBlueprints");case 31:case"end":return t.stop()}}),t,null,[[3,23,26,29],[8,15]])})))()},loadBlueprints:function(e){return Object(g["a"])(Object(m["a"])().mark((function t(){var n,r,a;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,$();case 3:r=t.sent,a=Object(S["a"])({},r),n("loadedBlueprints",Object.keys(a).map((function(e){return a[e]})));case 6:case"end":return t.stop()}}),t)})))()}},modules:{}});U.subscribe((function(e,t){var n={couchDbUrl:t.couchDbUrl,couchDbUsername:t.couchDbUsername,couchDbPassword:t.couchDbPassword,version:t.version,settings:t.settings};console.log("Updating localstorage cache…"),localStorage.setItem("state",JSON.stringify(n))}));var q=U;Object(x["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){console.log("Service worker has been registered.");var t=72e5;setInterval((function(){console.log("Checking for service worker update…"),e.update()}),t),e.update(),q.commit("serviceWorker",{registration:e})},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){console.log("New content is available; please refresh."),q.commit("serviceWorker",{updateAvailable:!0,registration:e})},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("2ca0");var L=n("8c4f");r["a"].use(L["a"]);var N=[{path:"/diary",component:function(){return n.e("Diary~31ecd969").then(n.bind(null,"5fa4"))},props:function(e){return{query:e.query.q}},children:[{path:"",name:"Timeline",component:function(){return Promise.all([n.e("DiaryCalendar~DiaryTimeline~31ecd969"),n.e("DiaryTimeline~31ecd969")]).then(n.bind(null,"f67a"))}},{path:"visualization",name:"Visualization",component:function(){return n.e("DiaryVisualization~31ecd969").then(n.bind(null,"27ed"))},props:function(e){return{query:e.query.q,blueprint:e.query.blueprint||0,defaultEnd:e.query.end||null,defaultStart:e.query.start||null}}},{path:"calendar",name:"Calendar",component:function(){return Promise.all([n.e("DiaryCalendar~DiaryTimeline~31ecd969"),n.e("DiaryCalendar~31ecd969")]).then(n.bind(null,"ac0f"))}},{path:"e/:entryId",name:"Entry",component:function(){return Promise.all([n.e("DiaryCalendar~DiaryTimeline~31ecd969"),n.e("DiaryTimeline~31ecd969")]).then(n.bind(null,"f67a"))},props:!0}]},{path:"/about",name:"About",component:function(){return n.e("About~31ecd969").then(n.bind(null,"f820"))}},{path:"/tasks",component:function(){return n.e("Tasks~31ecd969").then(n.bind(null,"eb1f"))},props:function(e){return{query:e.query.q}}},{path:"/settings",name:"Settings",component:function(){return n.e("Settings~31ecd969").then(n.bind(null,"26d3"))}}],W=new L["a"]({routes:N});function z(e,t){return(!t||e.name!==t.name)&&!e.fullPath.startsWith("/diary/e/")}function I(e,t){Object(P["q"])(q,"pageview",{},{referrer:t?Object(P["e"])(window.location,t.fullPath):null,url:Object(P["e"])(window.location,e.fullPath)})}W.beforeEach((function(e,t,n){z(e,t)&&I(e,t),n()}));var H=W,F=n("f309");r["a"].use(F["a"]);var M=new F["a"]({icons:{iconfont:"mdiSvg"},theme:{options:{customProperties:!0},dark:!0,themes:{light:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}),Q=n("fc76"),V=n("94ed");r["a"].config.productionTip=!1,r["a"].prototype.$icons={mdiArrowLeft:V["a"],mdiBook:V["b"],mdiCalendar:V["c"],mdiChartTimelineVariant:V["d"],mdiCheck:V["e"],mdiChevronDown:V["f"],mdiChevronLeft:V["g"],mdiChevronRight:V["h"],mdiChevronUp:V["i"],mdiClock:V["j"],mdiClockOutline:V["k"],mdiClose:V["l"],mdiCog:V["m"],mdiContentCopy:V["n"],mdiDelete:V["o"],mdiDeleteOutline:V["p"],mdiDotsHorizontal:V["q"],mdiDownload:V["r"],mdiEye:V["s"],mdiEyeOff:V["t"],mdiFormatListBulleted:V["u"],mdiHeart:V["v"],mdiHeartOutline:V["w"],mdiHelpCircleOutline:V["x"],mdiMagnify:V["y"],mdiMenuDown:V["z"],mdiPencil:V["A"],mdiPlus:V["B"],mdiReply:V["C"],mdiReplyOutline:V["D"],mdiSend:V["E"],mdiSync:V["F"],mdiTrashCan:V["G"]},r["a"].prototype.$theme={appBar:{color:"pink darken-4"},card:{color:"grey darken-4",textSize:"body-1"},nestedCard:{color:"blue-grey darken-4",textSize:"body-2"},drawer:{color:"grey darken-4"},menu:{color:"grey darken-4"},switch:{color:"pink"},input:{color:"grey darken-4"},mainButton:{color:"pink darken-4"}};var R={apiHost:"https://stats.agate.blue",hashMode:!0,enableAutoPageviews:!1,trackLocalhost:"true"==Object({VUE_APP_DOMAIN:"tempo.agate.blue",VUE_APP_PLAUSIBLE_HOST:"https://stats.agate.blue",NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_PLAUSIBLE_TRACK_LOCALHOST,domain:"tempo.agate.blue"};r["a"].use(Q["a"],R),new r["a"]({router:H,store:q,render:function(e){return e(O)},vuetify:M,beforeCreate:function(){window.document.getElementById("app-shell").remove(),this.$store.commit("loadCachedState"),this.$store.commit("initDb"),this.$store.dispatch("setupSync",{url:this.$store.state.couchDbUrl,username:this.$store.state.couchDbUsername,password:this.$store.state.couchDbPassword})}}).$mount("#app")},"60fa":function(e,t,n){}});