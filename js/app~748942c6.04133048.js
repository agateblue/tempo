(function(e){function t(t){for(var n,a,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)a=i[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={"app~748942c6":0},o={"app~748942c6":0},s=[];function i(e){return c.p+"js/"+({"tasks~31ecd969":"tasks~31ecd969","visualization~31ecd969":"visualization~31ecd969","alasql~2a42e354":"alasql~2a42e354"}[e]||e)+"."+{"tasks~31ecd969":"e60113f9","visualization~31ecd969":"a1164372","alasql~2a42e354":"7d46ea10"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r={"tasks~31ecd969":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({"tasks~31ecd969":"tasks~31ecd969","visualization~31ecd969":"visualization~31ecd969","alasql~2a42e354":"alasql~2a42e354"}[e]||e)+"."+{"tasks~31ecd969":"726b3234","visualization~31ecd969":"31d6cfe0","alasql~2a42e354":"31d6cfe0"}[e]+".css",o=c.p+n,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===n||u===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[e],p.parentNode.removeChild(p),r(s)},p.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(p);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",d.name="ChunkLoadError",d.type=n,d.request=a,r[1](d)}o[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u;s.push([0,"chunk-vendors~253ae210","chunk-vendors~2ebc07f6","chunk-vendors~7d359b94","chunk-vendors~9c5b28f6","chunk-vendors~ec8c427e","chunk-vendors~fdc6512a","chunk-vendors~4a7e9e0b"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"025e":function(e,t,r){"use strict";r.d(t,"g",(function(){return h})),r.d(t,"c",(function(){return v})),r.d(t,"j",(function(){return m})),r.d(t,"h",(function(){return y})),r.d(t,"b",(function(){return w})),r.d(t,"e",(function(){return x})),r.d(t,"f",(function(){return k})),r.d(t,"i",(function(){return C})),r.d(t,"d",(function(){return S})),r.d(t,"a",(function(){return $})),r.d(t,"k",(function(){return T}));r("99af"),r("4de4"),r("4160"),r("caad"),r("c975"),r("a15b"),r("d81d"),r("fb6a"),r("b0c0"),r("b64b"),r("d3b7"),r("4d63"),r("ac1f"),r("25f0"),r("2532"),r("466d"),r("5319"),r("1276"),r("2ca0"),r("498a"),r("159b"),r("ddb0"),r("96cf");var n=r("1da1"),a=r("5530"),o=r("b85c"),s=r("53ca"),i=r("c707"),c=r.n(i),l={"+":1,"-":-1,"~":0,"?":null,"#":null,"!":null,"@":null},u={"+":"feeling","-":"feeling","~":"feeling","?":"feeling","#":"tag","@":"annotation"},d=/(^|\s)((#|\+{1,5}|-{1,5}|~|\?|!|@)([:A-zÀ-ÿ\d-]+(=(true|false|[:A-zÀ-ÿ\d-]+|".*")?(-?\d*(\.(\d+))?)?)?))/gi;function p(e){var t=[],r=new RegExp(d),n=r.exec(e);while(null!=n){var a={text:n[2],sign:n[3][0],id:n[4].replace(/"/g,"")},o=!0;if(a.type=u[a.sign],"annotation"===a.type){var s=a.id.replace(/"/g,"").split("=");a.id=s[0],a.value=s[1]||null}a.mood=l[a.sign],a.mood&&(a.mood=a.mood*n[3].length),o&&t.push(a),n=r.exec(e)}return t}function h(e){try{return e.replace(d,(function(e,t,r,n,a){return" [".concat(r,"](/?q=tag:").concat(encodeURIComponent(a),'){.internal-link data-query="tag:').concat(a.split("=")[0],'"}')}))}catch(t){return""}}function v(e){var t={text:e,tags:p(e),mood:0,type:"entry",data:null},r=[];return t.tags.forEach((function(e){null!=e.mood&&void 0!=e.mood&&(t.mood+=e.mood),"annotation"===e.type&&e.value&&r.push([e.id,e.value])})),r.length>0&&(t.data={},r.forEach((function(e){t.data[e[0]]=e[1]}))),t}function m(e){return e?e.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})).map((function(e){return f(e)})):[]}function f(e){var t=[];if(!e)return[];var r=e.split(" ");return r.forEach((function(e){var r=e.trim();r&&(Object.keys(l).indexOf(r[0])>-1?1===r.length?t.push({sign:r[0]}):t.push({tag:r}):r.startsWith("d:")||r.startsWith("date:")?t.push({date:r.split(":")[1]}):r.startsWith("t:")||r.startsWith("tag:")?t.push({tagName:r.split(/:(.+)/)[1]}):r.startsWith("c:")||r.startsWith("category:")?t.push({categoryName:r.split(/:(.+)/)[1]}):r.startsWith("$")?t.push({alias:r.slice(1)}):t.push({text:r}))})),t}function b(e,t){if(!e)return!1;var r=new RegExp(e,"i");return t.match(r)||!1}function g(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=function(n){var a=t[n];if(a.alias&&r[a.alias]){var o=y(e,m(r[a.alias]));if(!o)return{v:!1}}if(a.text&&!e.text.toLowerCase().includes(a.text.toLowerCase()))return{v:b(a.text,e.text)};if(a.tag){var s=e.tags.filter((function(e){return b(a.tag.text,e.text)}));if(0===s.length)return{v:!1}}if(a.tagName){var i=e.tags.filter((function(e){return b(a.tagName,e.id)}));if(0===i.length)return{v:!1}}if(a.categoryName)return{v:b(a.categoryName,e.category)};if(a.sign){var c=e.tags.filter((function(e){return e.sign===a.sign}));if(0===c.length)return{v:!1}}return a.date&&!e._id.startsWith(a.date)?{v:!1}:void 0},a=0;a<t.length;a++){var o=n(a);if("object"===Object(s["a"])(o))return o.v}return!0}function y(e,t,r){var n,a=Object(o["a"])(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(g(e,s,r))return!0}}catch(i){a.e(i)}finally{a.f()}return!1}function w(e){var t=new Date(e.date),r=_(t),n=t.getFullYear(),o={text:e.text,_id:e._id,_rev:e._rev,mood:e.mood,fullDate:t,date:t.toISOString().split("T")[0],year:n,month:t.getMonth()+1,day:t.getDate(),weekday:t.getDay()+1,weeknumber:r,week:"".concat(n,"-").concat(r),tags:{},data:e.data||null};return e.tags.forEach((function(e){o.tags[e.id]=Object(a["a"])({},e,{present:!0})})),o.data&&Object.keys(o.data).forEach((function(t){if(o.data[t])try{o.data[t]=JSON.parse(o.data[t])}catch(e){}})),o}function x(e,t){var r=new Date((new Date).getTime()-24*t*3600*1e3).getTime();return e.filter((function(e){return new Date(e.date)>=r})).map((function(e){return w(e)}))}function k(e){var t={};return e.forEach((function(e){Object.keys(e.tags).forEach((function(r){var n=t[r]||{id:r,entries:0,mood:0};n.entries+=1,n.mood+=e.mood,t[r]=n}))})),Object.keys(t).map((function(e){return t[e]}))}function _(e){e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));var t=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-t);var r=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-r)/864e5+1)/7)}function C(e,t,r){return r=r||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(r)+e}function S(e){var t=e.toISOString().split("T"),r=t[1].slice(0,5).split(":"),n=parseInt(r[0]),a=parseInt(r[1])+60*n;a-=e.getTimezoneOffset();var o=Math.floor(a/60);24===o&&(o=0);var s=a%60;return"".concat(C(o,2),":").concat(C(s,2))}var $=[{value:"line",text:"Plot line"},{value:"pie",text:"Pie chart"},{value:"percentage",text:"Percentage bar"},{value:"table",text:"Table"},{value:"json",text:"JSON"}];function E(e,t){return O.apply(this,arguments)}function O(){return O=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={include_docs:!0},e.next=3,t.state.db.allDocs(n);case 3:return a=e.sent,o=a.rows.map((function(e){return e.doc})),o=o.filter((function(e){return"entry"==e.type})),o=c()(o,["date"]),r&&o.reversed(),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function D(e,t,r){if(0===t.length)return e;var n={};return r.forEach((function(e){n[e.name]=e.query})),e.filter((function(e){return y(e,t,n)}))}function T(e){return j.apply(this,arguments)}function j(){return j=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.store,n=t.sortDesc,a=t.query,e.next=3,E(r,n);case 3:return o=e.sent,e.abrupt("return",D(o,m(a),r.state.aliases));case 5:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}},1:function(e,t){},2:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("a026"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"tempo",dark:""}},[r("v-app-bar",{attrs:{app:"",dense:"",color:e.$theme.appBar.color}},[r("v-spacer"),r("v-spacer"),r("v-toolbar-title",{staticClass:"mr-4",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$router.push("/")}}},[e._v(" Tempo ")]),r("v-spacer"),r("v-text-field",{ref:"search",staticClass:"search",attrs:{dense:"",solo:"","hide-details":"",clearable:"",placeholder:"Search","append-icon":e.$icons.mdiMagnify},on:{"click:append":function(t){e.expandSearch=!0,e.$router.push({path:e.$route.path,query:{q:e.searchQuery}})},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$router.push({path:e.$route.path,query:{q:e.searchQuery}})},"click:clear":function(t){return e.$router.push({path:e.$route.path,query:{q:""}})}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),r("v-btn",{staticClass:"ml-3",attrs:{small:"",icon:"",to:"/about"}},[r("v-icon",{domProps:{textContent:e._s(e.$icons.mdiHelpCircleOutline)}})],1),r("v-spacer"),r("v-spacer")],1),r("v-main",[r("v-container",{staticStyle:{"padding-bottom":"64px"},attrs:{fluid:"",tag:"main"}},[r("router-view",{ref:"view"})],1)],1),r("v-bottom-navigation",{attrs:{fixed:""}},[e.$store.state.couchDbUrl?r("v-btn",{style:e.bottomNavBarButtonStyle,attrs:{loading:e.isSyncing,disabled:e.isSyncing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.forceSync.apply(null,arguments)}},scopedSlots:e._u([{key:"loader",fn:function(){return[r("span",[e._v("Loading...")])]},proxy:!0}],null,!1,2673048543)},[!e.isSyncing&&e.syncError?r("span",[e._v(" Sync error: "),e.syncError.name?r("span",[e._v(e._s(e.syncError.name))]):r("span",[e._v("Unknown")])]):r("span",[e._v(" Sync ")]),r("v-icon",{domProps:{textContent:e._s(e.$icons.mdiSync)}})],1):r("v-btn"),r("v-spacer"),r("v-btn",{style:e.bottomNavBarButtonStyle,attrs:{to:"/diary"}},[r("span",[e._v("Diary")]),r("v-icon",{domProps:{textContent:e._s(e.$icons.mdiBook)}})],1),r("v-btn",{style:e.bottomNavBarButtonStyle,attrs:{to:"/tasks"}},[r("span",[e._v("Tasks")]),r("v-icon",{domProps:{textContent:e._s(e.$icons.mdiCheck)}})],1),r("v-btn",{style:e.bottomNavBarButtonStyle,attrs:{to:"/settings"}},[r("span",[e._v("Settings")]),r("v-icon",{domProps:{textContent:e._s(e.$icons.mdiCog)}})],1),r("v-spacer"),r("v-btn",{style:e.bottomNavBarButtonStyle,on:{click:function(t){return e.scrollToTop()}}},[r("v-icon",{domProps:{textContent:e._s(e.$icons.mdiChevronUp)}})],1)],1)],1)},o=[],s=(r("96cf"),r("1da1")),i={data:function(){return{drawer:null,isSyncing:!1,syncError:null,searchQuery:this.$route.query.q||"",exportDialog:!1}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadCharts");case 2:return t.next=4,e.$store.dispatch("loadAliases");case 4:return t.next=6,e.$store.dispatch("loadBoardConfig");case 6:navigator.serviceWorker&&navigator.serviceWorker.addEventListener("controllerchange",(function(){e.$store.state.serviceWorker.refreshing||(e.$store.commit("serviceWorker",{refreshing:!0}),window.location.reload())}));case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;window.onclick=function(t){var r="internal-link";"a"==t.target.localName&&t.target.classList.contains(r)&&(t.preventDefault(),e.searchQuery=t.target.getAttribute("data-query"),e.$router.push({path:e.$route.path,query:{q:t.target.getAttribute("data-query")}}))}},computed:{bottomNavBarButtonStyle:function(){return"height: 56px; background: transparent;"}},methods:{forceSync:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isSyncing=!0,e.syncError=null,t.prev=2,t.next=5,e.$store.dispatch("forceSync");case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](2),e.syncError=t.t0;case 10:e.syncError||(e.syncError=!1),e.isSyncing=!1,setTimeout((function(){e.syncError=null}),3e3);case 13:case"end":return t.stop()}}),t,null,[[2,7]])})))()},updateApp:function(){this.$store.commit("serviceWorker",{updateAvailable:!1}),this.$store.state.serviceWorker.registration&&this.$store.state.serviceWorker.registration.waiting&&this.$store.state.serviceWorker.registration.waiting.postMessage({command:"skipWaiting"})},scrollToTop:function(){window.scrollTo(0,0)}},watch:{"$route.path":{handler:function(e){"/"===e&&this.$router.push("/diary")},immediate:!0},"$store.state.lastSync":{handler:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("lastSync updated",e),r.prev=1,r.next=4,t.$store.state.db.get("webhook");case 4:n=r.sent,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),console.log("No webhhook found");case 10:if(!n||!n.webhook){r.next=13;break}return r.next=13,t.$store.dispatch("setWebhook",n.webhook);case 13:case"end":return r.stop()}}),r,null,[[1,7]])})))()},immediate:!0}}},c=i,l=(r("5c0b"),r("2877")),u=r("6544"),d=r.n(u),p=r("7496"),h=r("40dc"),v=r("b81c"),m=r("8336"),f=r("a523"),b=r("132d"),g=r("f6c4"),y=r("2fa4"),w=r("8654"),x=r("2a7f"),k=Object(l["a"])(c,a,o,!1,null,null,null),_=k.exports;d()(k,{VApp:p["a"],VAppBar:h["a"],VBottomNavigation:v["a"],VBtn:m["a"],VContainer:f["a"],VIcon:b["a"],VMain:g["a"],VSpacer:y["a"],VTextField:w["a"],VToolbarTitle:x["b"]});var C=r("9483"),S=(r("99af"),r("4de4"),r("4160"),r("d81d"),r("d3b7"),r("159b"),r("2909")),$=r("5530"),E=r("2f62"),O=r("16b2"),D=r("5d16"),T=r("fcd3"),j=r("63ea"),R=r.n(j);O["a"].plugin(D["a"]),O["a"].plugin(T["a"]),n["a"].use(E["a"]);var V=1,q=new E["a"].Store({state:{db:null,pageSize:30,syncHandler:null,couchDbUrl:null,couchDbUsername:null,couchDbPassword:null,lastSync:new Date,version:V,dark:!0,shortcuts:[],charts:[],aliases:[],serviceWorker:{refreshing:!1,registration:null,updateAvailable:!1},webhook:{query:null,url:null},boardConfig:null},mutations:{handleSync:function(e,t){console.log("Received sync event",t),e.lastSync=new Date},syncHandler:function(e,t){e.syncHandler&&(console.log("Killing existing replication…"),e.syncHandler.cancel()),e.syncHandler=t},webhook:function(e,t){var r=t.url,n=t.query;e.webhook.url=r||null,e.webhook.query=n||null},couchDbConfig:function(e,t){var r=t.url,n=t.username,a=t.password;e.couchDbUrl=r,e.couchDbUsername=n,e.couchDbPassword=a},loadCachedState:function(e){if(localStorage.getItem("state")){var t=JSON.parse(localStorage.getItem("state"));t.version==V?(console.log("Loading cached state…"),this.replaceState(Object.assign(e,t))):(console.log("Ignoring stale cache"),e.version=V)}},initDb:function(e){e.syncHandler&&(console.log("Killing existing replication…"),e.syncHandler.cancel()),e.db=new O["a"]("db"),e.db.createIndex({index:{fields:["date","type"]}})},serviceWorker:function(e,t){e.serviceWorker=Object($["a"])({},e.serviceWorker,{},t)},shortcuts:function(e,t){e.shortcuts=t},charts:function(e,t){e.charts=t},aliases:function(e,t){e.aliases=t},boardConfig:function(e,t){e.boardConfig=t}},getters:{boardLists:function(e){return[].concat(Object(S["a"])(e.boardConfig.lists),[{label:"Done"}])},taskCategoryChoices:function(e){return e.boardConfig.categories.map((function(e){return{value:e.label,text:e.label}}))},taskListChoices:function(e){var t=0,r=[];return e.boardConfig.lists.forEach((function(e){r.push({value:t,text:e.label}),t+=1})),r.push({value:t,text:"Done"}),r}},actions:{addEntry:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.dispatch,r.next=3,n.db.put(t);case 3:return a("forceSync"),r.next=6,n.db.get(t._id);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})))()},updateEntry:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.dispatch,r.next=3,n.db.put(t);case 3:return a("forceSync"),r.next=6,n.db.get(t._id);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})))()},reset:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.state,a=e.dispatch,t.next=3,n.db.destroy();case 3:return r("boardConfig",null),r("initDb"),t.next=7,a("setupSync",{url:n.couchDbUrl,username:n.couchDbUsername,password:n.couchDbPassword});case 7:case"end":return t.stop()}}),t)})))()},setupSync:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,c,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.state,a=e.commit,o=t.url,s=t.username,i=t.password,a("syncHandler",null),a("couchDbConfig",{url:o,username:s,password:i}),!n.couchDbUrl){r.next=12;break}return console.log("Setting up live replication…"),c=new O["a"](n.couchDbUrl),console.log("Logging in…"),r.next=10,c.logIn(s,i);case 10:l=n.db.sync(c,{live:!0,retry:!0}).on("change",(function(){console.log("Sync change…")})).on("active",(function(){console.log("Sync active…")})).on("complete",(function(){console.log("Sync complete…")})),a("syncHandler",l);case 12:case"end":return r.stop()}}),r)})))()},forceSync:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.state,n=e.commit,r.couchDbUrl){t.next=3;break}return t.abrupt("return");case 3:return console.log("Forcing sync…"),a=new O["a"](r.couchDbUrl),t.next=7,a.logIn(r.couchDbUsername,r.couchDbPassword);case 7:return t.next=9,r.db.sync(a);case 9:n("handleSync",null);case 10:case"end":return t.stop()}}),t)})))()},setWebhook:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,o=t.url,s=t.query,a("webhook",{url:o,query:s}),r.prev=3,r.next=6,n.db.get("webhook");case 6:i=r.sent,r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](3),console.debug("No existing wehook");case 12:if(!i||!R()(i.webhook,n.webhook)){r.next=14;break}return r.abrupt("return");case 14:return c={_id:"webhook",webook:{url:o,query:s},type:"settings"},i&&(c._rev=i._rev),r.next=18,n.db.put(c);case 18:case"end":return r.stop()}}),r,null,[[3,9]])})))()},triggerWebhook:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.state,t=t||n.webhook.url,t){r.next=5;break}return console.log("No webhook configured, skipping",n.webhook.url),r.abrupt("return");case 5:return console.log("Sending webhook to",t),r.next=8,fetch(t,{method:"POST",body:""});case 8:return r.abrupt("return",r.sent);case 9:case"end":return r.stop()}}),r)})))()},newShortcut:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,a("shortcuts",[].concat(Object(S["a"])(n.shortcuts),[t])),r.prev=2,r.next=5,n.db.get("shortcuts");case 5:o=r.sent,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](2),console.debug("No existing shortcuts");case 11:if(!o||!R()(o.shortcuts,n.shortcuts)){r.next=13;break}return r.abrupt("return");case 13:return s={_id:"shortcuts",shortcuts:n.shortcuts,type:"settings"},o&&(s._rev=o._rev),r.next=17,n.db.put(s);case 17:case"end":return r.stop()}}),r,null,[[2,8]])})))()},removeShortcut:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,o=n.shortcuts.filter((function(e){return e!=t})),a("shortcuts",o),r.next=5,n.db.get("shortcuts");case 5:return s=r.sent,i={_id:"shortcuts",shortcuts:n.shortcuts,type:"settings"},s&&(i._rev=s._rev),r.next=10,n.db.put(i);case 10:case"end":return r.stop()}}),r)})))()},loadShortcuts:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,n=e.commit,a=[],t.prev=2,t.next=5,r.db.get("shortcuts");case 5:a=t.sent,t.next=12;break;case 8:return t.prev=8,t.t0=t["catch"](2),console.debug("No existing shortcuts"),t.abrupt("return");case 12:n("shortcuts",a.shortcuts);case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))()},addChart:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,o=(new Date).toISOString(),t._id=o,a("charts",[].concat(Object(S["a"])(n.charts),[t])),r.prev=4,r.next=7,n.db.get("charts");case 7:s=r.sent,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](4),console.debug("No existing charts");case 13:if(!s||!R()(s.charts,n.charts)){r.next=15;break}return r.abrupt("return");case 15:return i={_id:"charts",charts:n.charts,type:"settings"},s&&(i._rev=s._rev),r.next=19,n.db.put(i);case 19:case"end":return r.stop()}}),r,null,[[4,10]])})))()},removeChart:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,o=n.charts.filter((function(e){return e._id!=t})),a("charts",o),r.next=5,n.db.get("charts");case 5:return s=r.sent,i={_id:"charts",charts:n.charts,type:"settings"},s&&(i._rev=s._rev),r.next=10,n.db.put(i);case 10:case"end":return r.stop()}}),r)})))()},updateChart:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,o=[],n.charts.forEach((function(e){e._id===t._id?o.push(t):o.push(e)})),a("charts",o),r.next=6,n.db.get("charts");case 6:return s=r.sent,i={_id:"charts",charts:n.charts,type:"settings"},s&&(i._rev=s._rev),r.next=11,n.db.put(i);case 11:case"end":return r.stop()}}),r)})))()},loadCharts:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,n=e.commit,a=[],t.prev=2,t.next=5,r.db.get("charts");case 5:a=t.sent,t.next=12;break;case 8:return t.prev=8,t.t0=t["catch"](2),console.debug("No existing charts"),t.abrupt("return");case 12:n("charts",a.charts);case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))()},boardConfig:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,a("boardConfig",t),r.prev=2,r.next=5,n.db.get("boardConfig");case 5:o=r.sent,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](2),console.debug("No existing lists");case 11:if(!o||!R()(o.boardConfig,n.boardConfig)){r.next=13;break}return r.abrupt("return");case 13:return s={_id:"boardConfig",boardConfig:n.boardConfig,type:"settings"},o&&(s._rev=o._rev),r.next=17,n.db.put(s);case 17:case"end":return r.stop()}}),r,null,[[2,8]])})))()},loadBoardConfig:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,n=e.commit,a=[],t.prev=2,t.next=5,r.db.get("boardConfig");case 5:a=t.sent,t.next=12;break;case 8:return t.prev=8,t.t0=t["catch"](2),console.debug("No existing boardConfig"),t.abrupt("return");case 12:n("boardConfig",a.boardConfig);case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))()},addAlias:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,o=(new Date).toISOString(),t._id=o,a("aliases",[].concat(Object(S["a"])(n.aliases),[t])),r.prev=4,r.next=7,n.db.get("aliases");case 7:s=r.sent,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](4),console.debug("No existing aliases");case 13:if(!s||!R()(s.aliases,n.aliases)){r.next=15;break}return r.abrupt("return");case 15:return i={_id:"aliases",aliases:n.aliases,type:"settings"},s&&(i._rev=s._rev),r.next=19,n.db.put(i);case 19:case"end":return r.stop()}}),r,null,[[4,10]])})))()},removeAlias:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,o=n.aliases.filter((function(e){return e._id!=t})),a("aliases",o),r.next=5,n.db.get("aliases");case 5:return s=r.sent,i={_id:"aliases",aliases:n.aliases,type:"settings"},s&&(i._rev=s._rev),r.next=10,n.db.put(i);case 10:case"end":return r.stop()}}),r)})))()},updateAlias:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,o=[],n.aliases.forEach((function(e){e._id===t._id?o.push(t):o.push(e)})),a("aliases",o),r.next=6,n.db.get("aliases");case 6:return s=r.sent,i={_id:"aliases",aliases:n.aliases,type:"settings"},s&&(i._rev=s._rev),r.next=11,n.db.put(i);case 11:case"end":return r.stop()}}),r)})))()},loadAliases:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,n=e.commit,a=[],t.prev=2,t.next=5,r.db.get("aliases");case 5:a=t.sent,t.next=12;break;case 8:return t.prev=8,t.t0=t["catch"](2),console.debug("No existing aliases"),t.abrupt("return");case 12:n("aliases",a.aliases);case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))()}},modules:{}});q.subscribe((function(e,t){var r={couchDbUrl:t.couchDbUrl,couchDbUsername:t.couchDbUsername,couchDbPassword:t.couchDbPassword,webhook:t.webhook,version:t.version};console.log("Updating localstorage cache…"),localStorage.setItem("state",JSON.stringify(r))}));var F=q;Object(C["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){console.log("Service worker has been registered.");var t=72e5;setInterval((function(){console.log("Checking for service worker update…"),e.update()}),t),e.update(),F.commit("serviceWorker",{registration:e})},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){console.log("New content is available; please refresh."),F.commit("serviceWorker",{updateAvailable:!0,registration:e})},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var I=r("8c4f"),U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pb-8"},[r("v-container",{staticClass:"narrow"},[r("entry-form",{key:"timeline-"+e.$store.state.lastSync,ref:"entryForm",attrs:{"textarea-label":"Write a new entry",compact:!0,color:"transparent"},on:{fullscreen:function(t){e.showEntryModal=!0},submitted:e.handleCreated}})],1),r("v-divider"),r("timeline",{key:"timeline-"+e.$store.state.lastSync,ref:"timeline",staticClass:"container narrow",attrs:{entries:e.shownEntries},on:{updated:function(t){return e.$emit("updated",t)},deleted:function(t){return e.$emit("deleted",t)}}}),e.shownEntries.length<e.entries.length?r("v-container",{key:"container-"+e.$store.state.lastSync,staticClass:"narrow"},[e.showShowMoreButton?r("v-btn",{directives:[{name:"intersect",rawName:"v-intersect",value:{handler:e.showMore,options:{threshold:.5}},expression:"{\n        handler: showMore,\n        options: {\n          threshold: 0.5\n        }\n      }"}],attrs:{color:"secondary"},on:{click:function(t){return t.preventDefault(),e.showMore.apply(null,arguments)}}},[e._v("Show more")]):e._e()],1):e._e(),r("entry-modal",{attrs:{show:e.showEntryModal},on:{"update:show":function(t){e.showEntryModal=t},submitted:e.handleCreated}})],1)},B=[],M=(r("fb6a"),r("ddb0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._l(e.timelineRows,(function(t){return["entry"===t.type?r("v-card",{key:t.id,staticClass:"my-2",attrs:{elevation:"1",color:t.color}},[r("entry",{attrs:{row:t},on:{updated:function(t){return e.$emit("updated",t)},deleted:function(t){return e.$emit("deleted",t)}}})],1):r("h3",{key:t.repr,staticClass:"py-4 mt-4"},[r("date-entry",{attrs:{row:t}})],1)]}))],2)}),N=[],P=(r("c975"),r("d4cd")),A=r.n(P),z=new A.a({html:!0,linkify:!0,breaks:!0});z.use(r("364f")),z.use(r("4cd2"),{blockquote:"blockquote"});var L=z,W=r("025e"),H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-text",{class:e.$theme.card.textSize},[r("v-badge",{staticStyle:{display:"block !important"},attrs:{color:e.row.color,dot:""}},[r("div",{staticClass:"rendered-markdown grey--text text--lighten-2",domProps:{innerHTML:e._s(e.expand?e.row.text:e.truncatedText)}})]),e.isTruncated?r("div",[r("v-btn",{staticClass:"mt-4",attrs:{small:""},on:{click:function(t){e.expand=!e.expand}}},[e.expand?[e._v(" Collapse "),r("v-icon",[e._v(e._s(e.$icons.mdiChevronUp))])]:[e._v(" Expand "),r("v-icon",[e._v(e._s(e.$icons.mdiChevronDown))])]],2)],1):e._e()],1),r("v-lazy",{attrs:{options:{threshold:.5},"min-height":"50",transition:"fade-transition"}},[r("v-card-actions",[r("time",{staticClass:"text-body-2 grey--text text--darken-1",attrs:{date:e.row.entry.fullDate.toISOString(),title:e.row.entry.fullDate.toISOString()}},[r("v-icon",{attrs:{small:"",color:"grey darken-2"}},[e._v(e._s(e.$icons.mdiClockOutline))]),e._v(" "+e._s(e.row.time)+" ")],1),r("v-spacer"),r("v-btn",{staticClass:"px-1",attrs:{icon:"",small:"",color:"grey darken-2",title:"Edit"},on:{click:function(t){e.showEntryModal=!0}}},[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.$icons.mdiPencil))])],1),r("v-btn",{staticClass:"px-1",attrs:{icon:"",small:"",color:"grey darken-2",title:"Copy to clipboard"},on:{click:function(t){return e.copyToClipboard(e.row.entry.text)}}},[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.$icons.mdiContentCopy))])],1),r("v-btn",{staticClass:"px-1",attrs:{icon:"",small:"",color:"grey darken-2",title:"Delete"},on:{click:function(t){e.deleteDialog=!0}}},[r("v-icon",{attrs:{left:""}},[e._v(e._s(e.$icons.mdiDelete))])],1),r("entry-modal",{attrs:{show:e.showEntryModal,"entry-form-props":{entry:e.row.rawEntry,name:"how-"+e.row.rawEntry._id}},on:{"update:show":function(t){e.showEntryModal=t},submitted:e.update}}),r("v-dialog",{attrs:{"max-width":"400"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",{attrs:{color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Delete this entry?")]),r("v-card-text",[e._v(" This action is irreversible. ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.deleteDialog=!1,e.handleDelete()}}},[e._v(" Delete ")])],1)],1)],1)],1)],1)],1)},J=[],Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("entry-form",e._b({on:{"update:show":function(t){return e.$emit("update:show",t)},submitted:function(t){e.show=!1,e.$emit("submitted",t)}}},"entry-form",e.entryFormProps,!1))],1)},Y=[],K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{color:e.color,outlined:""}},[e.compact?e._e():r("v-toolbar",{attrs:{dense:"",color:e.$theme.appBar.color}},[r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$emit("update:show",!1)}}},[r("v-icon",[e._v(e._s(e.$icons.mdiClose))])],1),r("v-spacer"),e.entry?r("v-toolbar-title",[e._v("Update entry")]):r("v-toolbar-title",[e._v("Write a new entry")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{text:""},on:{click:e.submit}},[e._v("Save")])],1)],1),r("v-container",{class:["narrow mt-4",{"px-0 px-0":e.compact}]},[r("v-textarea",{ref:"textarea",attrs:{clearable:"",outlined:"",name:e.name,id:"composer","auto-grow":"",autofocus:"",label:e.textareaLabel,placeholder:"How do you feel?"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?t.shiftKey||t.altKey||t.metaKey?null:e.submit.apply(null,arguments):null}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e.compact?r("div",{staticClass:"d-flex justify-space-between"},[r("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("fullscreen")}}},[e._v("Edit in fullscreen")]),r("v-btn",{attrs:{text:""},on:{click:e.submit}},[e._v("Save")])],1):e._e()],1),e.compact?e._e():r("v-divider"),e.compact?e._e():r("v-container",{staticClass:"narrow mt-4"},[r("v-expansion-panels",{attrs:{flat:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Shortcuts")]),r("v-expansion-panel-content",[e.$store.state.shortcuts.length>0?[r("h3",{staticClass:"my-4"},[e._v("Existing shortcuts")]),r("v-list",{attrs:{dense:""}},e._l(e.$store.state.shortcuts,(function(t){return r("v-list-item",{key:t,on:{click:function(r){e.text=t,e.$refs.textarea.focus(),e.panel=null}}},[r("v-list-item-content",[e._v(" "+e._s(t)+" ")]),r("v-list-item-icon",[r("v-btn",{attrs:{icon:""},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.$store.dispatch("removeShortcut",t)}}},[r("v-icon",[e._v(e._s(e.$icons.mdiClose))])],1)],1)],1)})),1)]:e._e(),r("h3",{staticClass:"my-4"},[e._v("New shortcut")]),r("p",[e._v("Add a new shortcut to quickly log a given entry in the future.")]),r("v-form",[r("v-text-field",{attrs:{label:"Shortcut content",placeholder:"Feeling +good",required:""},model:{value:e.newShortcut,callback:function(t){e.newShortcut=t},expression:"newShortcut"}}),r("v-btn",{attrs:{disabled:!e.newShortcut},on:{click:function(t){return e.$store.dispatch("newShortcut",e.newShortcut)}}},[e._v(" Add ")])],1)],2)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Date and time")]),r("v-expansion-panel-content",[r("v-date-picker",{attrs:{landscape:e.$vuetify.breakpoint.mdAndUp,scrollable:""},model:{value:e.newDate,callback:function(t){e.newDate=t},expression:"newDate"}}),r("v-time-picker",{staticClass:"mt-2",attrs:{landscape:e.$vuetify.breakpoint.mdAndUp,scrollable:""},model:{value:e.newTime,callback:function(t){e.newTime=t},expression:"newTime"}})],1)],1)],1)],1)],1)},G=[],X=(r("ac1f"),r("1276"),r("0f32")),Z=r.n(X),ee={props:{entry:{type:Object,default:null},name:{type:String,default:"how"},initialText:{type:String,default:""},textareaLabel:{type:String,default:"Entry content"},color:{type:String,default:""},compact:{type:Boolean,default:!1}},data:function(){return{text:this.initialText,dateDialog:!1,newDate:null,newTime:null,timeMenu:!1,dateMenu:!1,maxDate:null,maxTime:null,newShortcut:null,panel:null}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setMaxDate(),r=new Date,e.entry?(e.text=e.entry.text,r=new Date(e.entry.date)):e.text||(e.text=localStorage.getItem("entry-draft")),e.date=r,t.next=6,e.$store.dispatch("loadShortcuts");case 6:case"end":return t.stop()}}),t)})))()},computed:{date:{get:function(){if(!this.newDate||!this.newTime)return null;var e=new Date;return"".concat(this.newDate,"T").concat(this.newTime,":").concat(Object(W["i"])(e.getSeconds(),2))},set:function(e){if(!e||this.compact)return this.newDate=null,void(this.newTime=null);e.toISOString||(e=new Date(e));var t=e.toISOString().split("T");this.newDate=t[0],this.newTime=Object(W["d"])(e)}}},methods:{setMaxDate:function(){var e=new Date,t=e.toISOString().split("T");this.maxDate=t[0],this.maxTime=t[1]},submit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.text){t.next=2;break}return t.abrupt("return");case 2:if(!e.entry){t.next=8;break}return t.next=5,e.update();case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,e.addNew();case 10:r=t.sent;case 11:return e.$emit("submitted",r),t.next=14,e.$store.dispatch("triggerWebhook");case 14:case"end":return t.stop()}}),t)})))()},addNew:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.date?new Date(e.date):new Date,n=Object($["a"])({},Object(W["c"])(e.text),{date:r.toISOString()}),n._id=n.date,t.next=5,e.$store.dispatch("addEntry",n);case 5:return a=t.sent,e.$emit("created",a),e.text="",e.date=null,t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new Date(e.date||e.entry.date),n=Object($["a"])({},Object(W["c"])(e.text),{_rev:e.entry._rev,_id:e.entry._id,date:r.toISOString()}),t.next=4,e.$store.dispatch("updateEntry",n);case 4:return a=t.sent,e.$emit("updated",a),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))()}},watch:{text:{handler:Z()((function(e){this.entry||localStorage.setItem("entry-draft",e||"")}),1e3,{leading:!0,trailing:!0})}}},te=ee,re=r("b0af"),ne=r("2e4b"),ae=r("ce7e"),oe=r("cd555"),se=r("49e2"),ie=r("c865"),ce=r("0393"),le=r("4bd4"),ue=r("8860"),de=r("da13"),pe=r("5d23"),he=r("34c3"),ve=r("a844"),me=r("c964"),fe=r("71d9"),be=Object(l["a"])(te,K,G,!1,null,null,null),ge=be.exports;d()(be,{VBtn:m["a"],VCard:re["a"],VContainer:f["a"],VDatePicker:ne["a"],VDivider:ae["a"],VExpansionPanel:oe["a"],VExpansionPanelContent:se["a"],VExpansionPanelHeader:ie["a"],VExpansionPanels:ce["a"],VForm:le["a"],VIcon:b["a"],VList:ue["a"],VListItem:de["a"],VListItemContent:pe["a"],VListItemIcon:he["a"],VSpacer:y["a"],VTextField:w["a"],VTextarea:ve["a"],VTimePicker:me["a"],VToolbar:fe["a"],VToolbarItems:x["a"],VToolbarTitle:x["b"]});var ye={props:{show:{type:Boolean,default:!1},entryFormProps:{type:Object,default:function(){return{}}}},components:{EntryForm:ge}},we=ye,xe=r("169a"),ke=Object(l["a"])(we,Q,Y,!1,null,null,null),_e=ke.exports;d()(ke,{VDialog:xe["a"]});var Ce=r("59f0");Ce["a"].setup({byWords:!0,length:60,keepWhitespaces:!0});var Se={props:{row:Object},components:{EntryModal:_e},data:function(){return{deleteDialog:!1,showEntryModal:!1,currentEntry:this.row.rawEntry,expand:!1}},computed:{truncatedText:function(){return Object(Ce["a"])(this.row.text)},isTruncated:function(){return this.truncatedText.length<this.row.text.length}},methods:{copyToClipboard:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.clipboard.writeText(e);case 2:case"end":return t.stop()}}),t)})))()},update:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.currentEntry=e,t.$emit("updated",e);case 2:case"end":return r.stop()}}),r)})))()},handleDelete:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.state.db.remove(e.row.rawEntry);case 2:return e.$emit("deleted",e.row.rawEntry),t.next=5,e.$store.dispatch("triggerWebhook");case 5:case"end":return t.stop()}}),t)})))()}}},$e=Se,Ee=r("4ca6"),Oe=r("99d9"),De=r("b687"),Te=Object(l["a"])($e,H,J,!1,null,null,null),je=Te.exports;d()(Te,{VBadge:Ee["a"],VBtn:m["a"],VCard:re["a"],VCardActions:Oe["a"],VCardText:Oe["b"],VCardTitle:Oe["c"],VDialog:xe["a"],VIcon:b["a"],VLazy:De["a"],VSpacer:y["a"]});var Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"font-weight-light text--lighten"},[e._v(" "+e._s(e.row.repr)+" ")])},Ve=[],qe={props:{row:Object}},Fe=qe,Ie=Object(l["a"])(Fe,Re,Ve,!1,null,null,null),Ue=Ie.exports,Be=[{id:"day",repr:function(e){return e.fullDate.toDateString()}}];function Me(e,t,r,n){var a=[];return n?e.forEach((function(e){t[e.id]=[{repr:e.repr(r),entries:[r]}]})):e.forEach((function(e){var n=t[e.id][t[e.id].length-1];e.repr(r)===n.repr?n.entries.push(r):(a.push(Object($["a"])({type:e.id},n)),t[e.id].push({repr:e.repr(r),entries:[r]}))})),a}function Ne(e,t,r){var n=[],a=[];return t.forEach((function(t){e.forEach((function(e){r[e.id].forEach((function(r){-1===a.indexOf(r)&&e.repr(t.entry)===r.repr&&(a.push(r),n.push(r))}))})),n.push(t)})),n}var Pe={props:["entries"],components:{Entry:je,DateEntry:Ue},computed:{timelineRows:function(){var e={},t=[],r=Object(S["a"])(this.entries);return r.forEach((function(r){var n=Object(W["b"])(r),a={text:L.render(Object(W["g"])(n.text)),id:Math.random(),color:"grey",type:"entry",entry:n,rawEntry:r,time:Object(W["d"])(n.fullDate)},o=" accent-";n.mood>0?a.color="light-green"+o+Math.min(n.mood+1,4):n.mood<0&&(a.color="deep-orange"+o+Math.min(Math.abs(n.mood)+1,4)),Me(Be,e,n,0===t.length),t.push(a)})),t=Ne(Be,t,e),t}}},Ae=Pe,ze=Object(l["a"])(Ae,M,N,!1,null,null,null),Le=ze.exports;d()(ze,{VCard:re["a"]});var We=r("b047"),He=r.n(We),Je={props:{allEntries:Array},components:{Timeline:Le,EntryForm:ge,EntryModal:_e},data:function(){return{showEntryModal:!1,showShowMoreButton:!1,count:this.$store.state.pageSize,sortDesc:!0}},computed:{entries:function(){var e=Object(S["a"])(this.allEntries);return this.sortDesc&&e.reverse(),e},shownEntries:function(){return this.entries.slice(0,this.count)}},methods:{handleCreated:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$emit("created",e);case 1:case"end":return r.stop()}}),r)})))()},showMore:He()((function(e){e&&!e[0].isIntersecting||(this.count+=this.$store.state.pageSize)}),1e3,{leading:!0,trailing:!1,maxWait:500})},watch:{shownEntries:function(){var e=this;setTimeout((function(){e.showShowMoreButton=!0}),1e3)}}},Qe=Je,Ye=r("269a"),Ke=r.n(Ye),Ge=r("90a2"),Xe=Object(l["a"])(Qe,U,B,!1,null,null,null),Ze=Xe.exports;d()(Xe,{VBtn:m["a"],VContainer:f["a"],VDivider:ae["a"]}),Ke()(Xe,{Intersect:Ge["a"]});var et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-container",{staticClass:"narrow"},[r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Options")]),r("v-card-text",{class:e.$theme.card.textSize},[r("v-text-field",{attrs:{type:"number",step:"1",label:"Days to show"},model:{value:e.graphDays,callback:function(t){e.graphDays=t},expression:"graphDays"}})],1)],1),r("v-btn",{staticClass:"mb-4",attrs:{color:e.$theme.mainButton.color},on:{click:function(t){e.showvisualizationModal=!0}}},[r("v-icon",[e._v(e._s(e.$icons.mdiPlus))]),e._v(" Add a new visualization ")],1)],1),r("v-divider"),r("v-container",{staticClass:"narrow mt-4"},[r("dataviz",{attrs:{entries:e.queryableEntries,tags:e.queryableTags,days:e.graphDays}}),r("visualization-modal",{attrs:{days:e.graphDays,entries:e.queryableEntries,tags:e.queryableTags,show:e.showvisualizationModal},on:{"update:show":function(t){e.showvisualizationModal=t}}})],1)],1)},tt=[],rt=r("5f09"),nt={props:{allEntries:Array},components:{VisualizationModal:rt["default"],Dataviz:function(){return r.e("visualization~31ecd969").then(r.bind(null,"f3da"))}},data:function(){return{showvisualizationModal:!1,graphDays:60}},computed:{entries:function(){return this.allEntries},queryableEntries:function(){return Object(W["e"])(this.entries,this.graphDays)},queryableTags:function(){return Object(W["f"])(this.queryableEntries)}}},at=nt,ot=Object(l["a"])(at,et,tt,!1,null,null,null),st=ot.exports;d()(ot,{VBtn:m["a"],VCard:re["a"],VCardText:Oe["b"],VCardTitle:Oe["c"],VContainer:f["a"],VDivider:ae["a"],VIcon:b["a"],VTextField:w["a"]});var it=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pb-8"},[r("v-container",[r("v-tabs",{attrs:{"show-arrows":"",centered:"",height:"36","background-color":"transparent"}},[r("v-tab",{key:e.entries.length,attrs:{to:{path:"/diary",query:{q:e.query}},exact:""}},[e._v(" Entries · "+e._s(e.entries.length)+" ")]),r("v-tab",{attrs:{to:{path:"/diary/calendar",query:{q:e.query}}}},[e._v("Calendar")]),r("v-tab",{attrs:{to:{path:"/diary/visualization",query:{q:e.query}}}},[e._v("Visualization")]),r("v-tab",{attrs:{to:{path:"/diary/advanced",query:{q:e.query}}}},[e._v("Advanced")])],1)],1),r("router-view",{attrs:{"all-entries":e.entries},on:{deleted:e.handleDelete,updated:e.handleUpdate,created:e.handleCreated}})],1)},ct=[],lt=(r("841c"),{props:{query:String},data:function(){return{entries:[]}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.search();case 1:case"end":return t.stop()}}),t)})))()},methods:{handleCreated:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.entries.push(e);case 1:case"end":return r.stop()}}),r)})))()},handleDelete:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.entries=t.entries.filter((function(t){return t._id!=e._id}));case 1:case"end":return r.stop()}}),r)})))()},handleUpdate:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.entries.forEach((function(t){t._id===e._id&&Object.assign(t,e)}));case 1:case"end":return r.stop()}}),r)})))()},search:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(W["k"])({store:e.$store,sortDesc:e.sortDesc,query:e.query});case 2:e.entries=t.sent;case 3:case"end":return t.stop()}}),t)})))()}},watch:{query:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.search();case 2:case"end":return t.stop()}}),t)})))()},"$store.state.lastSync":{handler:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.search();case 2:case"end":return t.stop()}}),t)})))()}}}}),ut=lt,dt=r("71a3"),pt=r("fe57"),ht=Object(l["a"])(ut,it,ct,!1,null,null,null),vt=ht.exports;d()(ht,{VContainer:f["a"],VTab:dt["a"],VTabs:pt["a"]});var mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"narrow"},[r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Export your entries")]),r("v-card-text",[r("p",[e._v("Export the selected "+e._s(e.allEntries.length)+" entries. Use JSON format if you want to reimport them in Tempo, or Markdown for a more text-based format that can be opened and read by text editors.")])]),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},on:{click:e.downloadMarkdown}},[e._v("Export as Markdown")]),r("v-btn",{attrs:{color:"primary"},on:{click:e.downloadJSON}},[e._v("Export as JSON")])],1)],1),r("v-card",{attrs:{color:e.$theme.card.color,cm:""}},[r("v-card-title",{staticClass:"headline"},[e._v("Aliases")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v(" Aliases let you save and reuse search queries. For instance, you could set a "),r("code",[e._v("$dreams")]),e._v(" alias in place of a "),r("code",[e._v("dream, dreamed, dreams, nightmare, nightmares")]),e._v(" query. ")]),r("v-form",[e._l(e.$store.state.aliases,(function(e){return r("alias-form",{key:e._id,attrs:{alias:e}})})),r("alias-form",{key:String(e.lastAliasesUpdate),on:{created:function(t){e.lastAliasesUpdate=new Date}}})],2)],1)],1)],1)},ft=[],bt=(r("a15b"),r("3ca3"),r("2b3d"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"3"}},[r("v-text-field",{attrs:{label:"Name",placeholder:"dreams",prefix:"$","hide-details":"",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{label:"Query",placeholder:"dreams, nightmares",hint:e.matchingEntries+" matching entries.",required:""},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1),r("v-col",{attrs:{cols:"12",sm:"3"}},[r("v-btn",{staticClass:"mt-4",attrs:{text:"",type:"submit"}},[e._v("Save")]),e.alias?r("v-btn",{staticClass:"mt-4",attrs:{text:"",icon:"",title:"Delete",type:"noop"},on:{click:function(t){return t.preventDefault(),e.$store.dispatch("removeAlias",e.alias._id)}}},[r("v-icon",[e._v(e._s(e.$icons.mdiDeleteOutline))])],1):e._e()],1)],1)],1)}),gt=[],yt=(r("b0c0"),{props:{alias:{required:!1}},data:function(){return{query:this.alias?this.alias.query:"",name:this.alias?this.alias.name:"",matchingEntries:0}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.updateMatchingEntries(e.query);case 2:case"end":return t.stop()}}),t)})))()},computed:{aliasConfig:function(){var e=this.alias||{};return Object($["a"])({},e,{},{name:this.name,query:this.query})}},methods:{submit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.aliasConfig.name&&e.aliasConfig.query){t.next=2;break}return t.abrupt("return");case 2:if(!e.alias){t.next=7;break}return t.next=5,e.update();case 5:t.next=9;break;case 7:return t.next=9,e.addNew();case 9:case"end":return t.stop()}}),t)})))()},addNew:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("addAlias",e.aliasConfig);case 2:r=t.sent,e.$emit("created",r);case 4:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("updateAlias",e.aliasConfig);case 2:r=t.sent,e.$emit("updated",r);case 4:case"end":return t.stop()}}),t)})))()},updateMatchingEntries:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.matchingEntries=0,!e){r.next=6;break}return r.next=4,Object(W["k"])({store:t.$store,sortDesc:!1,query:t.query});case 4:n=r.sent,t.matchingEntries=n.length;case 6:case"end":return r.stop()}}),r)})))()}},watch:{query:{handler:He()(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateMatchingEntries(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),500)}}}),wt=yt,xt=r("62ad"),kt=r("0fd9"),_t=Object(l["a"])(wt,bt,gt,!1,null,null,null),Ct=_t.exports;d()(_t,{VBtn:m["a"],VCol:xt["a"],VForm:le["a"],VIcon:b["a"],VRow:kt["a"],VTextField:w["a"]});var St={props:{allEntries:Array},components:{AliasForm:Ct},data:function(){return{lastAliasesUpdate:new Date}},methods:{downloadMarkdown:function(){var e=this.allEntries.map((function(e){return"---\ndate: ".concat(e.date,"\nmood: ").concat(e.mood,"\nevent: ").concat(e.event,"\ndata: ").concat(JSON.stringify(e.data||{}),"\n---\n\n").concat(e.text,"\n\n")}));this.downloadFile(e.join("\n"),"text/markdown","tempo.md")},downloadJSON:function(){this.downloadFile(JSON.stringify(this.allEntries),"application/json","tempo.json")},downloadFile:function(e,t,r){var n=this.makeFile(e,t),a=document.createElement("a");a.setAttribute("download",r),a.href=n,document.body.appendChild(a),window.requestAnimationFrame((function(){var e=new MouseEvent("click");a.dispatchEvent(e),document.body.removeChild(a)}))},makeFile:function(e,t){var r=new Blob([e],{type:t}),n=window.URL.createObjectURL(r);return n}}},$t=St,Et=Object(l["a"])($t,mt,ft,!1,null,null,null),Ot=Et.exports;d()(Et,{VBtn:m["a"],VCard:re["a"],VCardActions:Oe["a"],VCardText:Oe["b"],VCardTitle:Oe["c"],VContainer:f["a"],VForm:le["a"]});var Dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-container",[r("v-sheet",{attrs:{tile:""}},[r("v-toolbar",{attrs:{dense:"",flat:""}},[e.$refs.calendar?r("v-toolbar-title",[e._v(" "+e._s(e.$refs.calendar.title)+" ")]):e._e(),r("v-spacer"),r("v-switch",{staticClass:"mt-5",attrs:{label:"Show all events"},model:{value:e.expanded,callback:function(t){e.expanded=t},expression:"expanded"}})],1),r("v-toolbar",{attrs:{dense:"",flat:""}},[r("v-menu",{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[r("v-btn",e._g(e._b({attrs:{outlined:"",small:""}},"v-btn",a,!1),n),[r("span",[e._v(e._s(e.type))]),r("v-icon",{attrs:{right:""}},[e._v(" "+e._s(e.$icons.mdiMenuDown)+" ")])],1)]}}])},[r("v-list",[r("v-list-item",{on:{click:function(t){e.type="day"}}},[r("v-list-item-title",[e._v("Day")])],1),r("v-list-item",{on:{click:function(t){e.type="week"}}},[r("v-list-item-title",[e._v("Week")])],1),r("v-list-item",{on:{click:function(t){e.type="month"}}},[r("v-list-item-title",[e._v("Month")])],1)],1)],1),r("v-spacer"),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.$refs.calendar.prev()}}},[r("v-icon",[e._v(e._s(e.$icons.mdiChevronLeft))]),e._v(" Previous ")],1),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.$refs.calendar.next()}}},[e._v(" Next "),r("v-icon",[e._v(e._s(e.$icons.mdiChevronRight))])],1),r("v-spacer"),r("v-btn",{attrs:{outlined:"",small:""},on:{click:e.setToday}},[e._v(" Today ")])],1)],1),r("v-sheet",{attrs:{height:e.expanded?"":"60vh","min-height":e.expanded?"":600}},[r("v-calendar",{ref:"calendar",attrs:{weekdays:e.weekday,type:e.type,events:e.events,"event-overlap-mode":e.mode,"event-overlap-threshold":30},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.viewDay},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),r("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[r("v-card",{attrs:{"min-width":"350px","max-width":"350px"}},[r("v-card-text",[r("span",{domProps:{innerHTML:e._s(e.renderMarkdown(e.selectedEvent.details))}})])],1)],1)],1)],1)],1)},Tt=[],jt={props:{allEntries:Array},data:function(){return{type:"month",types:["month","week","day","4day"],mode:"stack",modes:["stack","column"],weekday:[1,2,3,4,5,6,0],weekdays:[{text:"Sun - Sat",value:[0,1,2,3,4,5,6]},{text:"Mon - Sun",value:[1,2,3,4,5,6,0]},{text:"Mon - Fri",value:[1,2,3,4,5]},{text:"Mon, Wed, Fri",value:[1,3,5]}],value:"",selectedEvent:{},selectedElement:null,selectedOpen:!1,expanded:!1}},mounted:function(){this.$refs.calendar.checkChange()},computed:{events:function(){var e=this;return this.allEntries.map((function(t){return{start:new Date(t.date),name:t.text,details:t.text,color:e.getEventColor(t),timed:!0}}))}},methods:{setToday:function(){this.value=""},viewDay:function(e){var t=e.date;this.value=t,"day"!=this.type?this.type="day":this.type="month"},getEventColor:function(e){var t=(e.tags||[]).filter((function(e){return"!"===e.sign})).length>0;return void 0===e.mood?"":t&&e.mood<0?"red accent-4":-1===e.mood?"amber darken-2":e.mood<-1?"red darken-1":t&&e.mood>0?"green accent-4":1===e.mood?"light-green":e.mood>1?"green darken-3":"grey darken-2"},showEvent:function(e){var t=this,r=e.nativeEvent,n=e.event,a=function(){t.selectedEvent=n,t.selectedElement=r.target,requestAnimationFrame((function(){return requestAnimationFrame((function(){return t.selectedOpen=!0}))}))};this.selectedOpen?(this.selectedOpen=!1,requestAnimationFrame((function(){return requestAnimationFrame((function(){return a()}))}))):a(),r.stopPropagation()},renderMarkdown:function(e){return L.render(Object(W["g"])(e))}}},Rt=jt,Vt=r("a4f6"),qt=r("e449"),Ft=r("8dd9"),It=r("b73d"),Ut=Object(l["a"])(Rt,Dt,Tt,!1,null,null,null),Bt=Ut.exports;d()(Ut,{VBtn:m["a"],VCalendar:Vt["a"],VCard:re["a"],VCardText:Oe["b"],VContainer:f["a"],VIcon:b["a"],VList:ue["a"],VListItem:de["a"],VListItemTitle:pe["b"],VMenu:qt["a"],VSheet:Ft["a"],VSpacer:y["a"],VSwitch:It["a"],VToolbar:fe["a"],VToolbarTitle:x["b"]});var Mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("About Tempo")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v(" Tempo is a personnal log and mood tracker. You can use it to track what's going on in your life and how different events affect your well-being. ")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Features")]),r("v-card-text",{class:e.$theme.card.textSize},[r("ul",[r("li",[e._v("Markdown syntax")]),r("li",[r("a",{attrs:{href:"#private"}},[e._v("Private by design")])]),r("li",[r("a",{attrs:{href:"#offline"}},[e._v("Offline first")])]),r("li",[r("a",{attrs:{href:"#mood-tracking"}},[e._v("Mood tracking")])]),r("li",[r("a",{attrs:{href:"#search"}},[e._v("Powerful tagging and filtering")])]),r("li",[r("a",{attrs:{href:"#software"}},[e._v("Powered by free and open-source software")])])])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("How does it work?")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v(" Use Tempo as you would use a personnal log. Write notes when you feel like it, and use hashtags and moodtags to indicate how you feel. ")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Where is the data stored?")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("The data never leaves your browser and isn't sent to any third-party or server. The only exception to that is when you enable (optional) syncing with other devices, through a CouchDB server of your choice.")]),r("p",[e._v("All your data can also be exported in JSON and Markdown format at any time.")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"offline",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Does it work offline?")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Yes! Tempo is a Progressive Web App (PWA) and can be accessed and used even without an internet connection.")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Hashtags")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v(" While entirely optional, hashtags and moodtags can help you categorize your notes and track your moods. Here is a sample note using hashtags: ")]),r("blockquote",{staticClass:"blockquote"},[e._v(" Had a great day at "),r("a",{attrs:{href:""}},[e._v("#work!")])]),r("p",[e._v("Hashtags can help you to categorize your notes and search them later.")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"mood-tracking",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Moodtags")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Moodtags work similarly, but allow you to associate a mood with a given word. For instance:")]),r("blockquote",{staticClass:"blockquote"},[e._v(" Stephanie and I had an argument. I feel "),r("a",{attrs:{href:""}},[e._v("--angry")]),e._v(" and "),r("a",{attrs:{href:""}},[e._v("-confused")]),e._v("… ")]),r("p",[e._v(" By using the "),r("code",[e._v("-")]),e._v(" tag, you indicate to Tempo that "),r("code",[e._v("angry")]),e._v(" and "),r("code",[e._v("confused")]),e._v(" are negative feelings. Similarly, you could use the "),r("code",[e._v("+")]),e._v(" tag in front of a word to indicate a positive feeling. You can repeat these signs up to three time to indicate a greater intensity. ")]),r("p",[e._v(" When present, "),r("code",[e._v("-")]),e._v(" and "),r("code",[e._v("+")]),e._v(" tags are used to compute the mood score of each note. This score is then used in the daily mood widget to track your moods over time. ")]),r("p",[e._v(" Each occurence of "),r("code",[e._v("-")]),e._v(" and "),r("code",[e._v("+")]),e._v(" in a note will decrease or increase the mood score by 1. ")]),r("p",[e._v(" There are a couple additional tags you can use, that don't affect the mood score, but can be useful regardless: ")]),r("ul",[r("li",[r("code",[e._v("~")]),e._v(": indicate mixed feelings")]),r("li",[r("code",[e._v("?")]),e._v(": indicate you don't know how you feel")]),r("li",[r("code",[e._v("!")]),e._v(": indicate that something is important")])]),r("p",[e._v(" You can freely mix any and all these tags in the same note, and use different moodtags with the same words. For instance: ")]),r("blockquote",{staticClass:"blockquote"},[e._v(" I hate insomnia, I'm feeling so "),r("a",{attrs:{href:""}},[e._v("---tired")]),e._v("… ")]),r("blockquote",{staticClass:"blockquote"},[e._v(" Had a good sport session this morning, I'm "),r("a",{attrs:{href:""}},[e._v("+tired")]),e._v(" but happy. ")])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"search",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Search and filter notes")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v(" The search bar let you filter notes that match your query. The daily mood widget is also updated accordingly. You can find some basic queries below: ")]),r("v-simple-table",{staticClass:"mb-2",scopedSlots:e._u([{key:"default",fn:function(){return[r("tbody",[r("tr",[r("td",[r("code",[e._v("sport")])]),r("td",[e._v(' Find all the entries containing the word "sport" ')])]),r("tr",[r("td",[r("code",[e._v("tag:sport")])]),r("td",[e._v(" Find all the entries tagged with sport ")])]),r("tr",[r("td",[r("code",[e._v("-sport")])]),r("td",[e._v(" Find all the entries tagged with -sport ")])]),r("tr",[r("td",[r("code",[e._v("@2020-09-17")])]),r("td",[e._v(" Find all the entries submitted on 2020-09-17 ")])]),r("tr",[r("td",[r("code",[e._v("@2020")])]),r("td",[e._v(" Find all the entries submitted during 2020 ")])]),r("tr",[r("td",[r("code",[e._v("@2020-08")])]),r("td",[e._v(" Find all the entries submitted during 2020-08 ")])]),r("tr",[r("td",[r("code",[e._v("+")])]),r("td",[e._v(" Find all entries with a positive moodtag (also works with "),r("code",[e._v("-")]),e._v(", "),r("code",[e._v("?")]),e._v(", "),r("code",[e._v("!")]),e._v(" and "),r("code",[e._v("~")]),e._v(") ")])])])]},proxy:!0}])}),r("p",[e._v(" You can mix various parameters to further refine your results. Here are some more advanced queries: ")]),r("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[r("tbody",[r("tr",[r("td",[r("code",[e._v("+ @2020-09")])]),r("td",[e._v(" Find all positive entries submitted during 2020-09 ")])]),r("tr",[r("td",[r("code",[e._v("- tag:sleep")])]),r("td",[e._v(" Find all negative entries also tagged with sleep ")])]),r("tr",[r("td",[r("code",[e._v("tag:sleep, tag:nap")])]),r("td",[e._v(" Find all entries tagged with sleep or nap ")])])])]},proxy:!0}])})],1)],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"software",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Tempo is powered by free and open-source software")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[r("a",{attrs:{href:"https://code.eliotberriot.com/eliotberriot/tempo"}},[e._v("Source code is publicly available")]),e._v(" and can be reused, modified and self-hosted according to your needs. ")])])],1)],1)},Nt=[],Pt={},At=Pt,zt=r("1f4f"),Lt=Object(l["a"])(At,Mt,Nt,!1,null,null,null),Wt=Lt.exports;d()(Lt,{VCard:re["a"],VCardText:Oe["b"],VCardTitle:Oe["c"],VSimpleTable:zt["a"]});var Ht=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Settings")]),r("v-card-text",{class:e.$theme.card.textSize},[r("ul",[r("li",[r("a",{attrs:{href:"#import"}},[e._v("Import entries")])]),r("li",[r("a",{attrs:{href:"#import-tasks"}},[e._v("Import tasks")])]),r("li",[r("a",{attrs:{href:"#sync"}},[e._v("Sync")])]),r("li",[r("a",{attrs:{href:"#delete"}},[e._v("Delete data")])])])])],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"import",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Import entries")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Import entries from a JSON file exported from another Tempo session.")]),r("v-form",[r("v-file-input",{attrs:{accept:".json,application/json",label:"JSON export"},model:{value:e.toImportEntries,callback:function(t){e.toImportEntries=t},expression:"toImportEntries"}}),r("v-btn",{attrs:{disabled:!e.toImportEntries,color:"primary"},on:{click:e.importEntries}},[e._v(" Import ")]),e.importedEntries>0?r("p",[e._v("Imported "+e._s(e.importedEntries)+" entries!")]):e._e(),e.failedEntries>0?r("p",[e._v("Skipped "+e._s(e.failedEntries)+" existing entries.")]):e._e()],1)],1)],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"import-tasks",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Import tasks")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Import tasks and board configuration from a JSON file exported from another Tempo session.")]),r("v-form",[r("v-file-input",{attrs:{accept:".json,application/json",label:"JSON export"},model:{value:e.toImportTasks,callback:function(t){e.toImportTasks=t},expression:"toImportTasks"}}),r("v-btn",{attrs:{disabled:!e.toImportTasks,color:"primary"},on:{click:e.importTasks}},[e._v(" Import ")]),e.importedEntries>0?r("p",[e._v("Imported "+e._s(e.importedEntries)+" entries!")]):e._e(),e.failedEntries>0?r("p",[e._v("Skipped "+e._s(e.failedEntries)+" existing entries.")]):e._e()],1)],1)],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"sync",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Syncing with other devices")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Your diary can be synced with other devices using any "),r("a",{attrs:{href:"https://couchdb.apache.org/"}},[e._v("CouchDB server")]),e._v(". This is not provided as part of Tempo though, and you have to find or host one yourself.")]),r("v-form",[r("v-text-field",{attrs:{label:"CouchDB URL",placeholder:"http://localhost:5984/tempo",required:""},model:{value:e.couchDbUrl,callback:function(t){e.couchDbUrl=t},expression:"couchDbUrl"}}),r("v-text-field",{attrs:{label:"CouchDB Username",name:"alice",required:""},model:{value:e.couchDbUsername,callback:function(t){e.couchDbUsername=t},expression:"couchDbUsername"}}),r("v-text-field",{staticClass:"input-group--focused",attrs:{"append-icon":e.showdbPassword?e.$icons.mdiEye:e.$icons.mdiEyeOff,type:e.showdbPassword?"text":"password",name:"input-10-2",required:"",label:"CouchDB Password"},on:{"click:append":function(t){e.showdbPassword=!e.showdbPassword}},model:{value:e.couchDbPassword,callback:function(t){e.couchDbPassword=t},expression:"couchDbPassword"}}),r("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.setupSync}},[e._v(" Setup sync ")]),e.syncStatus?r("span",[e._v(e._s(e.syncStatus))]):e._e()],1)],1)],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"webhook",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Webhook")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Notify an URL via a POST request when an entry is created, updated or deleted.")]),r("v-text-field",{attrs:{label:"Webhook URL",name:"webhookurl",type:"url",required:""},model:{value:e.webhookUrl,callback:function(t){e.webhookUrl=t},expression:"webhookUrl"}}),r("v-text-field",{attrs:{label:"Restrict to specific entries",placeholder:"tag:publish",name:"webhookquery"},model:{value:e.webhookQuery,callback:function(t){e.webhookQuery=t},expression:"webhookQuery"}}),r("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.webhookUrl},on:{click:function(t){return e.triggerWebhook(e.webhookUrl)}}},[e._v(" Send webhook now ")]),r("v-btn",{attrs:{color:"primary",disabled:!e.webhookUrl},on:{click:function(t){return e.$store.dispatch("setWebhook",{url:e.webhookUrl,query:e.webhookQuery})}}},[e._v(" Save ")])],1)],1),r("v-card",{staticClass:"mb-8",attrs:{tag:"section",id:"delete",color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Delete your data")]),r("v-card-text",{class:e.$theme.card.textSize},[r("p",[e._v("Delete all your data from Tempo.")]),r("v-btn",{attrs:{color:"error"},on:{click:e.deleteConfirm}},[e._v(" Delete my data… ")])],1)],1)],1)},Jt=[],Qt={data:function(){return{syncStatus:null,toImportEntries:null,toImportTasks:null,importedEntries:0,failedEntries:0,showdbPassword:!1,couchDbUrl:this.$store.state.couchDbUrl,couchDbUsername:this.$store.state.couchDbUsername,couchDbPassword:this.$store.state.couchDbPassword,webhookUrl:this.$store.state.webhook.url,webhookQuery:this.$store.state.webhook.query}},methods:{triggerWebhook:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("forceSync");case 2:return r.next=4,t.$store.dispatch("triggerWebhook",e);case 4:case"end":return r.stop()}}),r)})))()},importEntries:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.toImportEntries){t.next=3;break}return console.log("No file to import"),t.abrupt("return");case 3:return e.importedEntries=0,e.failedEntries=0,console.log("Importing entries…"),t.next=8,e.toImportEntries.text();case 8:return r=t.sent,n=JSON.parse(r),n.forEach((function(e){delete e._rev})),t.next=13,e.$store.state.db.bulkDocs(n);case 13:a=t.sent,e.importedEntries=a.filter((function(e){return e.ok})).length,e.failedEntries=a.filter((function(e){return!e.ok})).length;case 16:case"end":return t.stop()}}),t)})))()},importTasks:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.toImportTasks){t.next=3;break}return console.log("No file to import"),t.abrupt("return");case 3:return e.importedEntries=0,e.failedEntries=0,console.log("Importing tasks"),t.next=8,e.toImportTasks.text();case 8:return r=t.sent,n=JSON.parse(r),a=n.tasks,a.forEach((function(e){delete e._rev})),t.next=14,e.$store.dispatch("boardConfig",n.boardConfig);case 14:return t.next=16,e.$store.state.db.bulkDocs(a);case 16:o=t.sent,e.importedEntries=o.filter((function(e){return e.ok})).length,e.failedEntries=o.filter((function(e){return!e.ok})).length;case 19:case"end":return t.stop()}}),t)})))()},deleteConfirm:function(){confirm("This will remove all your notes. This action is irreversible.")&&(this.$store.dispatch("reset"),this.importedEntries=0,this.failedEntries=0)},setupSync:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.syncStatus="Checking sync...",t.prev=1,t.next=4,e.$store.dispatch("setupSync",{url:e.couchDbUrl,username:e.couchDbUsername,password:e.couchDbPassword});case 4:e.syncStatus="Sync OK!",t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.syncStatus="Error: ".concat(t.t0.name||t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}},Yt=Qt,Kt=r("23a7"),Gt=Object(l["a"])(Yt,Ht,Jt,!1,null,null,null),Xt=Gt.exports;d()(Gt,{VBtn:m["a"],VCard:re["a"],VCardText:Oe["b"],VCardTitle:Oe["c"],VFileInput:Kt["a"],VForm:le["a"],VTextField:w["a"]});var Zt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{key:"tasks-"+e.$store.state.lastSync},[!e.isConfigured||e.isEditing?r("v-card",{staticClass:"mb-8",attrs:{tag:"section",color:e.$theme.card.color}},[e.isEditing?r("v-card-title",{staticClass:"headline"},[e._v("Update your board")]):r("v-card-title",{staticClass:"headline"},[e._v("Create your board")]),r("v-card-text",{class:e.$theme.card.textSize},[r("board-form",{on:{updated:function(t){e.isEditing=!1}}})],1)],1):[r("v-row",{staticClass:"v-align"},[r("v-col",[r("h1",[e._v("Your board")])]),r("v-col",[r("v-btn",{staticClass:"float-right",attrs:{small:"",color:"secondary"},on:{click:function(t){e.isEditing=!0}}},[e._v("Edit...")]),r("v-btn",{staticClass:"float-right mx-2",attrs:{small:"",color:"secondary"},on:{click:function(t){t.stopPropagation(),e.exportDialog=!0}}},[e._v("Export...")])],1)],1),r("v-dialog",{attrs:{"max-width":"700"},model:{value:e.exportDialog,callback:function(t){e.exportDialog=t},expression:"exportDialog"}},[r("v-card",{attrs:{color:e.$theme.card.color}},[r("v-card-title",{staticClass:"headline"},[e._v("Export your tasks")]),r("v-card-text",[r("p",[e._v("Export the selected "+e._s(e.tasks.length)+" tasks and your board configuration.")])]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(t){e.exportDialog=!1}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{color:"primary"},on:{click:e.downloadJSON}},[e._v("Export as JSON")])],1)],1)],1),r("div",{staticClass:"board"},e._l(e.$store.getters["boardLists"],(function(t,n){return r("v-card",{key:n,class:["task-list mr-4",{collapsed:!e.lists[n].expanded},{expanded:e.lists[n].expanded}]},[r("v-card-title",{staticClass:"px-2 py-0 body-1"},[r("v-row",{staticClass:"py-3"},[r("v-col",{attrs:{cols:"10"}},[r("v-btn",{attrs:{"x-small":"",icon:""},on:{click:function(t){e.lists[n].expanded=!e.lists[n].expanded}}},[e.lists[n].expanded?r("v-icon",[e._v(e._s(e.$icons.mdiChevronDown))]):r("v-icon",[e._v(e._s(e.$icons.mdiChevronUp))])],1),e._v(" "+e._s(t.label)+" · "+e._s(e.tasksByList[n].length)+" ")],1),e.lists[n].expanded?r("v-col",{attrs:{cols:"2"}},[r("v-btn",{staticClass:"float-right",attrs:{fab:"",dark:"","x-small":"",color:"secondary"},on:{click:function(t){t.preventDefault(),e.lists[n].showForm=!e.lists[n].showForm}}},[r("v-icon",[e._v(e._s(e.$icons.mdiPlus))])],1)],1):e._e()],1)],1),r("v-divider"),e.lists[n].expanded?r("v-card-text",{staticClass:"py-2 px-2"},[e.lists[n].showForm?r("v-card",{attrs:{color:e.$theme.nestedCard.color}},[r("v-card-text",{staticClass:"pb-0 px-2 pt-1"},[r("v-form",{ref:"form"+n,refInFor:!0},[r("v-text-field",{attrs:{label:"Task",autofocus:"",required:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitTask(n)}},model:{value:e.newTaskText,callback:function(t){e.newTaskText=t},expression:"newTaskText"}}),r("v-select",{attrs:{items:e.$store.getters["taskCategoryChoices"],label:"Category"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitTask(n)}},model:{value:e.newTaskCategory,callback:function(t){e.newTaskCategory=t},expression:"newTaskCategory"}})],1)],1),r("v-card-actions",{staticClass:"py-0 px-2 mb-5"},[r("v-row",[r("v-col",[r("v-btn",{staticClass:"float-left",attrs:{text:""},on:{click:function(t){t.preventDefault(),e.lists[n].showForm=!1}}},[e._v(" Cancel ")])],1),r("v-col",[r("v-btn",{staticClass:"float-right",attrs:{color:"primary"},on:{click:function(t){return t.preventDefault(),e.submitTask(n)}}},[e._v(" Add ")])],1)],1)],1)],1):e._e(),r("draggable",{staticClass:"list-group",attrs:{group:{name:"tasks"}},on:{add:function(t){return e.moveCard(t.item.dataset.id,n)}},model:{value:e.tasksByList[n],callback:function(t){e.$set(e.tasksByList,n,t)},expression:"tasksByList[idx]"}},e._l(e.tasksByList[n],(function(t){return r("v-lazy",{key:"task-"+t._id+"-"+t._rev,attrs:{options:{threshold:.5},"data-id":t._id,"min-height":"50",transition:"fade-transition"}},[r("task-card",{staticClass:"mb-2",attrs:{task:t,"is-done":n===e.$store.getters["boardLists"].length-1},on:{done:function(t){return e.moveCard(t._id,e.$store.getters["boardLists"].length-1)},deleted:e.updateTasks,updated:e.updateTasks}})],1)})),1)],1):e._e()],1)})),1)]],2)},er=[],tr=(r("7db0"),r("c707")),rr=r.n(tr),nr={props:{query:String},components:{BoardForm:function(){return r.e("tasks~31ecd969").then(r.bind(null,"a2fd"))},TaskCard:function(){return r.e("tasks~31ecd969").then(r.bind(null,"5e25"))},draggable:function(){return r.e("tasks~31ecd969").then(r.t.bind(null,"b76a",7))}},data:function(){return{isEditing:!1,lists:{0:{showForm:!1,expanded:!0},1:{showForm:!1,expanded:!0},2:{showForm:!1,expanded:!0},3:{showForm:!1,expanded:!0},4:{showForm:!1,expanded:!0},5:{showForm:!1,expanded:!0},6:{showForm:!1,expanded:!0},7:{showForm:!1,expanded:!0},8:{showForm:!1,expanded:!0},9:{showForm:!1,expanded:!0}},tasks:[],tasksByList:{},newTaskText:"",newTaskCategory:null,exportDialog:!1}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getTasks();case 2:e.tasks=t.sent;case 3:case"end":return t.stop()}}),t)})))()},computed:{isConfigured:function(){return this.$store.state.boardConfig&&this.$store.state.boardConfig.lists.length>0}},methods:{getTasksByList:function(){var e=this,t={},r=-1;return this.$store.getters["boardLists"].forEach((function(){r+=1,t[r]=rr()(e.tasks.filter((function(e){return e.list===r}),["_id"])),t[r].reverse()})),t},filterTasks:function(e,t){return 0===t.length?e:e.filter((function(e){return Object(W["h"])(e,t)}))},getTasks:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.state.db.find({selector:{type:"task",date:{$gt:0}}});case 2:return r=t.sent,n=r.docs,t.abrupt("return",e.filterTasks(n,Object(W["j"])(e.query)));case 5:case"end":return t.stop()}}),t)})))()},submitTask:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.newTaskText&&0!==t.newTaskText.length){r.next=2;break}return r.abrupt("return");case 2:return t.lists[e].showForm=!1,n=(new Date).toISOString(),a={type:"task",_id:n,date:n,index:-t.tasksByList[e].length,text:t.newTaskText,list:e,category:t.newTaskCategory},r.next=7,t.$store.state.db.put(a);case 7:o=r.sent,a._rev=o.rev,t.tasks.push(a),t.newTaskText=null,t.newTaskCategory=null;case 12:case"end":return r.stop()}}),r)})))()},updateTasks:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getTasks();case 2:e.tasks=t.sent;case 3:case"end":return t.stop()}}),t)})))()},moveCard:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.$store.state.db.get(e);case 2:return a=n.sent,a.list=t,n.next=6,r.$store.state.db.put(a);case 6:if(t!==r.$store.getters["boardLists"].length-1){n.next=9;break}return n.next=9,r.updateTasks();case 9:case"end":return n.stop()}}),n)})))()},downloadJSON:function(){var e=JSON.stringify({tasks:this.tasks,boardConfig:this.$store.state.boardConfig});this.downloadFile(e,"application/json","tempo.json")},downloadFile:function(e,t,r){var n=this.makeFile(e,t),a=document.createElement("a");a.setAttribute("download",r),a.href=n,document.body.appendChild(a),window.requestAnimationFrame((function(){var e=new MouseEvent("click");a.dispatchEvent(e),document.body.removeChild(a)}))},makeFile:function(e,t){var r=new Blob([e],{type:t}),n=window.URL.createObjectURL(r);return n}},watch:{query:{handler:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getTasks();case 2:this.tasks=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),immediate:!0},tasks:{handler:function(){this.isConfigured&&(this.tasksByList=this.getTasksByList())},immediate:!0,deep:!0}}},ar=nr,or=r("b974"),sr=Object(l["a"])(ar,Zt,er,!1,null,null,null),ir=sr.exports;d()(sr,{VBtn:m["a"],VCard:re["a"],VCardActions:Oe["a"],VCardText:Oe["b"],VCardTitle:Oe["c"],VCol:xt["a"],VDialog:xe["a"],VDivider:ae["a"],VForm:le["a"],VIcon:b["a"],VLazy:De["a"],VRow:kt["a"],VSelect:or["a"],VSpacer:y["a"],VTextField:w["a"]}),n["a"].use(I["a"]);var cr=[{path:"/diary",component:vt,props:function(e){return{query:e.query.q}},children:[{path:"",name:"Timeline",component:Ze},{path:"visualization",name:"Visualization",component:st},{path:"calendar",name:"Calendar",component:Bt},{path:"advanced",name:"Advanced",component:Ot}]},{path:"/about",name:"About",component:Wt},{path:"/tasks",component:ir,props:function(e){return{query:e.query.q}}},{path:"/settings",name:"Settings",component:Xt}],lr=new I["a"]({routes:cr}),ur=lr,dr=r("f309");n["a"].use(dr["a"]);var pr=new dr["a"]({icons:{iconfont:"mdiSvg"},theme:{options:{customProperties:!0},dark:!0,themes:{light:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}),hr=r("94ed");n["a"].config.productionTip=!1,n["a"].prototype.$icons={mdiBook:hr["a"],mdiCalendar:hr["b"],mdiClock:hr["i"],mdiClockOutline:hr["j"],mdiContentCopy:hr["m"],mdiCog:hr["l"],mdiClose:hr["k"],mdiChartTimelineVariant:hr["c"],mdiFormatListBulleted:hr["t"],mdiDownload:hr["q"],mdiSync:hr["A"],mdiPencil:hr["x"],mdiCheck:hr["d"],mdiMagnify:hr["v"],mdiEye:hr["r"],mdiEyeOff:hr["s"],mdiDotsHorizontal:hr["p"],mdiDelete:hr["n"],mdiDeleteOutline:hr["o"],mdiSend:hr["z"],mdiMenuDown:hr["w"],mdiChevronUp:hr["h"],mdiChevronDown:hr["e"],mdiChevronRight:hr["g"],mdiChevronLeft:hr["f"],mdiPlus:hr["y"],mdiHelpCircleOutline:hr["u"]},n["a"].prototype.$theme={appBar:{color:"pink darken-4"},card:{color:"grey darken-4",textSize:"body-1"},nestedCard:{color:"blue-grey darken-4",textSize:"body-2"},drawer:{color:"grey darken-4"},menu:{color:"grey darken-4"},switch:{color:"pink"},input:{color:"grey darken-4"},mainButton:{color:"pink darken-4"}},new n["a"]({router:ur,store:F,render:function(e){return e(_)},vuetify:pr,beforeCreate:function(){window.document.getElementById("app-shell").remove(),this.$store.commit("loadCachedState"),this.$store.commit("initDb"),this.$store.dispatch("setupSync",{url:this.$store.state.couchDbUrl,username:this.$store.state.couchDbUsername,password:this.$store.state.couchDbPassword})}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),a=r.n(n);a.a},"5f09":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("v-card",[r("v-toolbar",{attrs:{color:e.$theme.appBar.color}},[r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$emit("update:show",!1)}}},[r("v-icon",[e._v(e._s(e.$icons.mdiClose))])],1),r("v-spacer"),e.config?r("v-toolbar-title",[e._v("Update chart")]):r("v-toolbar-title",[e._v("Add a new chart")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{text:""},on:{click:e.submit}},[e._v("Save")])],1)],1),r("v-divider"),r("v-container",{staticClass:"mt-4"},[r("h1",[e._v("Chart configuration")]),r("v-form",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Chart name"},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Data query"},model:{value:e.field,callback:function(t){e.field=t},expression:"field"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-select",{attrs:{items:[{text:"Entries",value:"entries"},{text:"Tags",value:"tags"}],label:"Data source",required:""},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-select",{attrs:{items:e.chartTypes,label:"Visualization",required:""},model:{value:e.chartType,callback:function(t){e.chartType=t},expression:"chartType"}})],1)],1)],1)],1),r("v-divider"),r("v-container",{staticClass:"mt-4"},[r("h1",[e._v("Preview")]),r("chart-component",{key:e.previewKey,attrs:{config:e.chartConfig,tags:e.tags,entries:e.entries,builtin:!1},on:{"query:updated":function(t){e.query=t,e.field=null}}})],1)],1)],1)},a=[],o=(r("a9e3"),r("d3b7"),r("96cf"),r("1da1")),s=r("5530"),i=r("025e"),c={props:{entries:{type:Array},tags:{type:Array},show:{type:Boolean,default:!1},config:{type:Object,default:null},days:{type:Number,default:null}},components:{ChartComponent:function(){return r.e("visualization~31ecd969").then(r.bind(null,"6de0"))}},data:function(){return{field:"sum(mood) as Mood",defaultConfig:this.config,chartTypes:i["a"],label:(this.config||{}).label||"Mood by day",query:(this.config||{}).query||"SELECT date, sum(mood) as Mood FROM ? GROUP BY date ORDER BY date DESC",chartType:(this.config||{}).chartType||"line",source:(this.config||{}).source||"entries"}},computed:{chartConfig:function(){var e=this.config||{};return Object(s["a"])({},e,{},{label:this.label,query:this.query,chartType:this.chartType,source:this.source})},previewKey:function(){return JSON.stringify(this.chartConfig)}},methods:{setQuery:function(){this.field&&this.field.length>0&&(this.query="SELECT date, ".concat(this.field," FROM ? GROUP BY date ORDER BY date DESC"))},submit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.config){t.next=5;break}return t.next=3,e.update();case 3:t.next=7;break;case 5:return t.next=7,e.addNew();case 7:e.$emit("update:show",!1);case 8:case"end":return t.stop()}}),t)})))()},addNew:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("addChart",e.chartConfig);case 2:r=t.sent,e.$emit("created",r);case 4:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("updateChart",e.chartConfig);case 2:r=t.sent,e.$emit("updated",r);case 4:case"end":return t.stop()}}),t)})))()}},watch:{field:{handler:function(){this.setQuery()},immediate:!0}}},l=c,u=r("2877"),d=r("6544"),p=r.n(d),h=r("8336"),v=r("b0af"),m=r("62ad"),f=r("a523"),b=r("169a"),g=r("ce7e"),y=r("4bd4"),w=r("132d"),x=r("0fd9"),k=r("b974"),_=r("2fa4"),C=r("8654"),S=r("71d9"),$=r("2a7f"),E=Object(u["a"])(l,n,a,!1,null,null,null);t["default"]=E.exports;p()(E,{VBtn:h["a"],VCard:v["a"],VCol:m["a"],VContainer:f["a"],VDialog:b["a"],VDivider:g["a"],VForm:y["a"],VIcon:w["a"],VRow:x["a"],VSelect:k["a"],VSpacer:_["a"],VTextField:C["a"],VToolbar:S["a"],VToolbarItems:$["a"],VToolbarTitle:$["b"]})},"9c0c":function(e,t,r){}});